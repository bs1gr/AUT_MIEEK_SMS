import{j as e,u as ae,r as d,R as fs}from"./index-CyXJKIYV.js";const ys=()=>e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});function bs(t,s){return function(){return t.apply(s,arguments)}}const{toString:ar}=Object.prototype,{getPrototypeOf:Ot}=Object,{iterator:ut,toStringTag:js}=Symbol,xt=(t=>s=>{const n=ar.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),me=t=>(t=t.toLowerCase(),s=>xt(s)===t),ht=t=>s=>typeof s===t,{isArray:Me}=Array,De=ht("undefined");function Ve(t){return t!==null&&!De(t)&&t.constructor!==null&&!De(t.constructor)&&de(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ns=me("ArrayBuffer");function or(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Ns(t.buffer),s}const lr=ht("string"),de=ht("function"),ws=ht("number"),Je=t=>t!==null&&typeof t=="object",ir=t=>t===!0||t===!1,nt=t=>{if(xt(t)!=="object")return!1;const s=Ot(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(js in t)&&!(ut in t)},cr=t=>{if(!Je(t)||Ve(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},dr=me("Date"),ur=me("File"),xr=me("Blob"),hr=me("FileList"),mr=t=>Je(t)&&de(t.pipe),pr=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||de(t.append)&&((s=xt(t))==="formdata"||s==="object"&&de(t.toString)&&t.toString()==="[object FormData]"))},gr=me("URLSearchParams"),[fr,yr,br,jr]=["ReadableStream","Request","Response","Headers"].map(me),Nr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ke(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),Me(t))for(r=0,a=t.length;r<a;r++)s.call(null,t[r],r,t);else{if(Ve(t))return;const l=n?Object.getOwnPropertyNames(t):Object.keys(t),o=l.length;let i;for(r=0;r<o;r++)i=l[r],s.call(null,t[i],i,t)}}function vs(t,s){if(Ve(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const Ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ss=t=>!De(t)&&t!==Ae;function _t(){const{caseless:t,skipUndefined:s}=Ss(this)&&this||{},n={},r=(a,l)=>{const o=t&&vs(n,l)||l;nt(n[o])&&nt(a)?n[o]=_t(n[o],a):nt(a)?n[o]=_t({},a):Me(a)?n[o]=a.slice():(!s||!De(a))&&(n[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Ke(arguments[a],r);return n}const wr=(t,s,n,{allOwnKeys:r}={})=>(Ke(s,(a,l)=>{n&&de(a)?t[l]=bs(a,n):t[l]=a},{allOwnKeys:r}),t),vr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Sr=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},kr=(t,s,n,r)=>{let a,l,o;const i={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),l=a.length;l-- >0;)o=a[l],(!r||r(o,t,s))&&!i[o]&&(s[o]=t[o],i[o]=!0);t=n!==!1&&Ot(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},Cr=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},Ar=t=>{if(!t)return null;if(Me(t))return t;let s=t.length;if(!ws(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},_r=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Ot(Uint8Array)),Er=(t,s)=>{const r=(t&&t[ut]).call(t);let a;for(;(a=r.next())&&!a.done;){const l=a.value;s.call(t,l[0],l[1])}},Tr=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},Rr=me("HTMLFormElement"),Pr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),Wt=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),$r=me("RegExp"),ks=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ke(n,(a,l)=>{let o;(o=s(a,l,t))!==!1&&(r[l]=o||a)}),Object.defineProperties(t,r)},Dr=t=>{ks(t,(s,n)=>{if(de(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(de(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Or=(t,s)=>{const n={},r=a=>{a.forEach(l=>{n[l]=!0})};return Me(t)?r(t):r(String(t).split(s)),n},Fr=()=>{},Mr=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Lr(t){return!!(t&&de(t.append)&&t[js]==="FormData"&&t[ut])}const zr=t=>{const s=new Array(10),n=(r,a)=>{if(Je(r)){if(s.indexOf(r)>=0)return;if(Ve(r))return r;if(!("toJSON"in r)){s[a]=r;const l=Me(r)?[]:{};return Ke(r,(o,i)=>{const c=n(o,a+1);!De(c)&&(l[i]=c)}),s[a]=void 0,l}}return r};return n(t,0)},Ir=me("AsyncFunction"),Br=t=>t&&(Je(t)||de(t))&&de(t.then)&&de(t.catch),Cs=((t,s)=>t?setImmediate:s?((n,r)=>(Ae.addEventListener("message",({source:a,data:l})=>{a===Ae&&l===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Ae.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",de(Ae.postMessage)),Ur=typeof queueMicrotask<"u"?queueMicrotask.bind(Ae):typeof process<"u"&&process.nextTick||Cs,qr=t=>t!=null&&de(t[ut]),x={isArray:Me,isArrayBuffer:Ns,isBuffer:Ve,isFormData:pr,isArrayBufferView:or,isString:lr,isNumber:ws,isBoolean:ir,isObject:Je,isPlainObject:nt,isEmptyObject:cr,isReadableStream:fr,isRequest:yr,isResponse:br,isHeaders:jr,isUndefined:De,isDate:dr,isFile:ur,isBlob:xr,isRegExp:$r,isFunction:de,isStream:mr,isURLSearchParams:gr,isTypedArray:_r,isFileList:hr,forEach:Ke,merge:_t,extend:wr,trim:Nr,stripBOM:vr,inherits:Sr,toFlatObject:kr,kindOf:xt,kindOfTest:me,endsWith:Cr,toArray:Ar,forEachEntry:Er,matchAll:Tr,isHTMLForm:Rr,hasOwnProperty:Wt,hasOwnProp:Wt,reduceDescriptors:ks,freezeMethods:Dr,toObjectSet:Or,toCamelCase:Pr,noop:Fr,toFiniteNumber:Mr,findKey:vs,global:Ae,isContextDefined:Ss,isSpecCompliantForm:Lr,toJSONObject:zr,isAsyncFn:Ir,isThenable:Br,setImmediate:Cs,asap:Ur,isIterable:qr};function V(t,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}x.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const As=V.prototype,_s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_s[t]={value:t}});Object.defineProperties(V,_s);Object.defineProperty(As,"isAxiosError",{value:!0});V.from=(t,s,n,r,a,l)=>{const o=Object.create(As);x.toFlatObject(t,o,function(u){return u!==Error.prototype},h=>h!=="isAxiosError");const i=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return V.call(o,i,c,n,r,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",l&&Object.assign(o,l),o};const Hr=null;function Et(t){return x.isPlainObject(t)||x.isArray(t)}function Es(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function Vt(t,s,n){return t?t.concat(s).map(function(a,l){return a=Es(a),!n&&l?"["+a+"]":a}).join(n?".":""):s}function Gr(t){return x.isArray(t)&&!t.some(Et)}const Wr=x.toFlatObject(x,{},null,function(s){return/^is[A-Z]/.test(s)});function mt(t,s,n){if(!x.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=x.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,j){return!x.isUndefined(j[b])});const r=n.metaTokens,a=n.visitor||u,l=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(s);if(!x.isFunction(a))throw new TypeError("visitor must be a function");function h(p){if(p===null)return"";if(x.isDate(p))return p.toISOString();if(x.isBoolean(p))return p.toString();if(!c&&x.isBlob(p))throw new V("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(p)||x.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,b,j){let D=p;if(p&&!j&&typeof p=="object"){if(x.endsWith(b,"{}"))b=r?b:b.slice(0,-2),p=JSON.stringify(p);else if(x.isArray(p)&&Gr(p)||(x.isFileList(p)||x.endsWith(b,"[]"))&&(D=x.toArray(p)))return b=Es(b),D.forEach(function(M,q){!(x.isUndefined(M)||M===null)&&s.append(o===!0?Vt([b],q,l):o===null?b:b+"[]",h(M))}),!1}return Et(p)?!0:(s.append(Vt(j,b,l),h(p)),!1)}const N=[],_=Object.assign(Wr,{defaultVisitor:u,convertValue:h,isVisitable:Et});function m(p,b){if(!x.isUndefined(p)){if(N.indexOf(p)!==-1)throw Error("Circular reference detected in "+b.join("."));N.push(p),x.forEach(p,function(D,L){(!(x.isUndefined(D)||D===null)&&a.call(s,D,x.isString(L)?L.trim():L,b,_))===!0&&m(D,b?b.concat(L):[L])}),N.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return m(t),s}function Jt(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Ft(t,s){this._pairs=[],t&&mt(t,this,s)}const Ts=Ft.prototype;Ts.append=function(s,n){this._pairs.push([s,n])};Ts.toString=function(s){const n=s?function(r){return s.call(this,r,Jt)}:Jt;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function Vr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rs(t,s,n){if(!s)return t;const r=n&&n.encode||Vr;x.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(s,n):l=x.isURLSearchParams(s)?s.toString():new Ft(s,n).toString(r),l){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Kt{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){x.forEach(this.handlers,function(r){r!==null&&s(r)})}}const Ps={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jr=typeof URLSearchParams<"u"?URLSearchParams:Ft,Kr=typeof FormData<"u"?FormData:null,Yr=typeof Blob<"u"?Blob:null,Xr={isBrowser:!0,classes:{URLSearchParams:Jr,FormData:Kr,Blob:Yr},protocols:["http","https","file","blob","url","data"]},Mt=typeof window<"u"&&typeof document<"u",Tt=typeof navigator=="object"&&navigator||void 0,Qr=Mt&&(!Tt||["ReactNative","NativeScript","NS"].indexOf(Tt.product)<0),Zr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",en=Mt&&window.location.href||"http://localhost",tn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mt,hasStandardBrowserEnv:Qr,hasStandardBrowserWebWorkerEnv:Zr,navigator:Tt,origin:en},Symbol.toStringTag,{value:"Module"})),le={...tn,...Xr};function sn(t,s){return mt(t,new le.classes.URLSearchParams,{visitor:function(n,r,a,l){return le.isNode&&x.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function rn(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function nn(t){const s={},n=Object.keys(t);let r;const a=n.length;let l;for(r=0;r<a;r++)l=n[r],s[l]=t[l];return s}function $s(t){function s(n,r,a,l){let o=n[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=n.length;return o=!o&&x.isArray(a)?a.length:o,c?(x.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!i):((!a[o]||!x.isObject(a[o]))&&(a[o]=[]),s(n,r,a[o],l)&&x.isArray(a[o])&&(a[o]=nn(a[o])),!i)}if(x.isFormData(t)&&x.isFunction(t.entries)){const n={};return x.forEachEntry(t,(r,a)=>{s(rn(r),a,n,0)}),n}return null}function an(t,s,n){if(x.isString(t))try{return(s||JSON.parse)(t),x.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ye={transitional:Ps,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,l=x.isObject(s);if(l&&x.isHTMLForm(s)&&(s=new FormData(s)),x.isFormData(s))return a?JSON.stringify($s(s)):s;if(x.isArrayBuffer(s)||x.isBuffer(s)||x.isStream(s)||x.isFile(s)||x.isBlob(s)||x.isReadableStream(s))return s;if(x.isArrayBufferView(s))return s.buffer;if(x.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let i;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return sn(s,this.formSerializer).toString();if((i=x.isFileList(s))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mt(i?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),an(s)):s}],transformResponse:[function(s){const n=this.transitional||Ye.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(x.isResponse(s)||x.isReadableStream(s))return s;if(s&&x.isString(s)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?V.from(i,V.ERR_BAD_RESPONSE,this,null,this.response):i}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],t=>{Ye.headers[t]={}});const on=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ln=t=>{const s={};let n,r,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||s[n]&&on[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},Yt=Symbol("internals");function Be(t){return t&&String(t).trim().toLowerCase()}function at(t){return t===!1||t==null?t:x.isArray(t)?t.map(at):String(t)}function cn(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const dn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bt(t,s,n,r,a){if(x.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!x.isString(s)){if(x.isString(r))return s.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(s)}}function un(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function xn(t,s){const n=x.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,l,o){return this[r].call(this,s,a,l,o)},configurable:!0})})}let ue=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function l(i,c,h){const u=Be(c);if(!u)throw new Error("header name must be a non-empty string");const N=x.findKey(a,u);(!N||a[N]===void 0||h===!0||h===void 0&&a[N]!==!1)&&(a[N||c]=at(i))}const o=(i,c)=>x.forEach(i,(h,u)=>l(h,u,c));if(x.isPlainObject(s)||s instanceof this.constructor)o(s,n);else if(x.isString(s)&&(s=s.trim())&&!dn(s))o(ln(s),n);else if(x.isObject(s)&&x.isIterable(s)){let i={},c,h;for(const u of s){if(!x.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[h=u[0]]=(c=i[h])?x.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(i,n)}else s!=null&&l(n,s,r);return this}get(s,n){if(s=Be(s),s){const r=x.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return cn(a);if(x.isFunction(n))return n.call(this,a,r);if(x.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Be(s),s){const r=x.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||bt(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function l(o){if(o=Be(o),o){const i=x.findKey(r,o);i&&(!n||bt(r,r[i],i,n))&&(delete r[i],a=!0)}}return x.isArray(s)?s.forEach(l):l(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const l=n[r];(!s||bt(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const n=this,r={};return x.forEach(this,(a,l)=>{const o=x.findKey(r,l);if(o){n[o]=at(a),delete n[l];return}const i=s?un(l):String(l).trim();i!==l&&delete n[l],n[i]=at(a),r[i]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return x.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&x.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[Yt]=this[Yt]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Be(o);r[i]||(xn(a,o),r[i]=!0)}return x.isArray(s)?s.forEach(l):l(s),this}};ue.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(ue.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});x.freezeMethods(ue);function jt(t,s){const n=this||Ye,r=s||n,a=ue.from(r.headers);let l=r.data;return x.forEach(t,function(i){l=i.call(n,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function Ds(t){return!!(t&&t.__CANCEL__)}function Le(t,s,n){V.call(this,t??"canceled",V.ERR_CANCELED,s,n),this.name="CanceledError"}x.inherits(Le,V,{__CANCEL__:!0});function Os(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hn(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function mn(t,s){t=t||10;const n=new Array(t),r=new Array(t);let a=0,l=0,o;return s=s!==void 0?s:1e3,function(c){const h=Date.now(),u=r[l];o||(o=h),n[a]=c,r[a]=h;let N=l,_=0;for(;N!==a;)_+=n[N++],N=N%t;if(a=(a+1)%t,a===l&&(l=(l+1)%t),h-o<s)return;const m=u&&h-u;return m?Math.round(_*1e3/m):void 0}}function pn(t,s){let n=0,r=1e3/s,a,l;const o=(h,u=Date.now())=>{n=u,a=null,l&&(clearTimeout(l),l=null),t(...h)};return[(...h)=>{const u=Date.now(),N=u-n;N>=r?o(h,u):(a=h,l||(l=setTimeout(()=>{l=null,o(a)},r-N)))},()=>a&&o(a)]}const it=(t,s,n=3)=>{let r=0;const a=mn(50,250);return pn(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-r,h=a(c),u=o<=i;r=o;const N={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:h||void 0,estimated:h&&i&&u?(i-o)/h:void 0,event:l,lengthComputable:i!=null,[s?"download":"upload"]:!0};t(N)},n)},Xt=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},Qt=t=>(...s)=>x.asap(()=>t(...s)),gn=le.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,le.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,fn=le.hasStandardBrowserEnv?{write(t,s,n,r,a,l){const o=[t+"="+encodeURIComponent(s)];x.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),x.isString(r)&&o.push("path="+r),x.isString(a)&&o.push("domain="+a),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bn(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Fs(t,s,n){let r=!yn(s);return t&&(r||n==!1)?bn(t,s):s}const Zt=t=>t instanceof ue?{...t}:t;function Ee(t,s){s=s||{};const n={};function r(h,u,N,_){return x.isPlainObject(h)&&x.isPlainObject(u)?x.merge.call({caseless:_},h,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function a(h,u,N,_){if(x.isUndefined(u)){if(!x.isUndefined(h))return r(void 0,h,N,_)}else return r(h,u,N,_)}function l(h,u){if(!x.isUndefined(u))return r(void 0,u)}function o(h,u){if(x.isUndefined(u)){if(!x.isUndefined(h))return r(void 0,h)}else return r(void 0,u)}function i(h,u,N){if(N in s)return r(h,u);if(N in t)return r(void 0,h)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(h,u,N)=>a(Zt(h),Zt(u),N,!0)};return x.forEach(Object.keys({...t,...s}),function(u){const N=c[u]||a,_=N(t[u],s[u],u);x.isUndefined(_)&&N!==i||(n[u]=_)}),n}const Ms=t=>{const s=Ee({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=s;if(s.headers=o=ue.from(o),s.url=Rs(Fs(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),x.isFormData(n)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(x.isFunction(n.getHeaders)){const c=n.getHeaders(),h=["content-type","content-length"];Object.entries(c).forEach(([u,N])=>{h.includes(u.toLowerCase())&&o.set(u,N)})}}if(le.hasStandardBrowserEnv&&(r&&x.isFunction(r)&&(r=r(s)),r||r!==!1&&gn(s.url))){const c=a&&l&&fn.read(l);c&&o.set(a,c)}return s},jn=typeof XMLHttpRequest<"u",Nn=jn&&function(t){return new Promise(function(n,r){const a=Ms(t);let l=a.data;const o=ue.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:h}=a,u,N,_,m,p;function b(){m&&m(),p&&p(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function D(){if(!j)return;const M=ue.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),K={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:M,config:t,request:j};Os(function(y){n(y),b()},function(y){r(y),b()},K),j=null}"onloadend"in j?j.onloadend=D:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(D)},j.onabort=function(){j&&(r(new V("Request aborted",V.ECONNABORTED,t,j)),j=null)},j.onerror=function(q){const K=q&&q.message?q.message:"Network Error",S=new V(K,V.ERR_NETWORK,t,j);S.event=q||null,r(S),j=null},j.ontimeout=function(){let q=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const K=a.transitional||Ps;a.timeoutErrorMessage&&(q=a.timeoutErrorMessage),r(new V(q,K.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,t,j)),j=null},l===void 0&&o.setContentType(null),"setRequestHeader"in j&&x.forEach(o.toJSON(),function(q,K){j.setRequestHeader(K,q)}),x.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),i&&i!=="json"&&(j.responseType=a.responseType),h&&([_,p]=it(h,!0),j.addEventListener("progress",_)),c&&j.upload&&([N,m]=it(c),j.upload.addEventListener("progress",N),j.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(u=M=>{j&&(r(!M||M.type?new Le(null,t,j):M),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const L=hn(a.url);if(L&&le.protocols.indexOf(L)===-1){r(new V("Unsupported protocol "+L+":",V.ERR_BAD_REQUEST,t));return}j.send(l||null)})},wn=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,a;const l=function(h){if(!a){a=!0,i();const u=h instanceof Error?h:this.reason;r.abort(u instanceof V?u:new Le(u instanceof Error?u.message:u))}};let o=s&&setTimeout(()=>{o=null,l(new V(`timeout ${s} of ms exceeded`,V.ETIMEDOUT))},s);const i=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(l):h.removeEventListener("abort",l)}),t=null)};t.forEach(h=>h.addEventListener("abort",l));const{signal:c}=r;return c.unsubscribe=()=>x.asap(i),c}},vn=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,a;for(;r<n;)a=r+s,yield t.slice(r,a),r=a},Sn=async function*(t,s){for await(const n of kn(t))yield*vn(n,s)},kn=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},es=(t,s,n,r)=>{const a=Sn(t,s);let l=0,o,i=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:u}=await a.next();if(h){i(),c.close();return}let N=u.byteLength;if(n){let _=l+=N;n(_)}c.enqueue(new Uint8Array(u))}catch(h){throw i(h),h}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},ts=64*1024,{isFunction:Ze}=x,Cn=(({Request:t,Response:s})=>({Request:t,Response:s}))(x.global),{ReadableStream:ss,TextEncoder:rs}=x.global,ns=(t,...s)=>{try{return!!t(...s)}catch{return!1}},An=t=>{t=x.merge.call({skipUndefined:!0},Cn,t);const{fetch:s,Request:n,Response:r}=t,a=s?Ze(s):typeof fetch=="function",l=Ze(n),o=Ze(r);if(!a)return!1;const i=a&&Ze(ss),c=a&&(typeof rs=="function"?(p=>b=>p.encode(b))(new rs):async p=>new Uint8Array(await new n(p).arrayBuffer())),h=l&&i&&ns(()=>{let p=!1;const b=new n(le.origin,{body:new ss,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!b}),u=o&&i&&ns(()=>x.isReadableStream(new r("").body)),N={stream:u&&(p=>p.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!N[p]&&(N[p]=(b,j)=>{let D=b&&b[p];if(D)return D.call(b);throw new V(`Response type '${p}' is not supported`,V.ERR_NOT_SUPPORT,j)})});const _=async p=>{if(p==null)return 0;if(x.isBlob(p))return p.size;if(x.isSpecCompliantForm(p))return(await new n(le.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(x.isArrayBufferView(p)||x.isArrayBuffer(p))return p.byteLength;if(x.isURLSearchParams(p)&&(p=p+""),x.isString(p))return(await c(p)).byteLength},m=async(p,b)=>{const j=x.toFiniteNumber(p.getContentLength());return j??_(b)};return async p=>{let{url:b,method:j,data:D,signal:L,cancelToken:M,timeout:q,onDownloadProgress:K,onUploadProgress:S,responseType:y,headers:R,withCredentials:k="same-origin",fetchOptions:H}=Ms(p),C=s||fetch;y=y?(y+"").toLowerCase():"text";let P=wn([L,M&&M.toAbortSignal()],q),E=null;const w=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let z;try{if(S&&h&&j!=="get"&&j!=="head"&&(z=await m(R,D))!==0){let U=new n(b,{method:"POST",body:D,duplex:"half"}),X;if(x.isFormData(D)&&(X=U.headers.get("content-type"))&&R.setContentType(X),U.body){const[Z,ee]=Xt(z,it(Qt(S)));D=es(U.body,ts,Z,ee)}}x.isString(k)||(k=k?"include":"omit");const $=l&&"credentials"in n.prototype,A={...H,signal:P,method:j.toUpperCase(),headers:R.normalize().toJSON(),body:D,duplex:"half",credentials:$?k:void 0};E=l&&new n(b,A);let g=await(l?C(E,H):C(b,A));const O=u&&(y==="stream"||y==="response");if(u&&(K||O&&w)){const U={};["status","statusText","headers"].forEach(ie=>{U[ie]=g[ie]});const X=x.toFiniteNumber(g.headers.get("content-length")),[Z,ee]=K&&Xt(X,it(Qt(K),!0))||[];g=new r(es(g.body,ts,Z,()=>{ee&&ee(),w&&w()}),U)}y=y||"text";let J=await N[x.findKey(N,y)||"text"](g,p);return!O&&w&&w(),await new Promise((U,X)=>{Os(U,X,{data:J,headers:ue.from(g.headers),status:g.status,statusText:g.statusText,config:p,request:E})})}catch($){throw w&&w(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,p,E),{cause:$.cause||$}):V.from($,$&&$.code,p,E)}}},_n=new Map,Ls=t=>{let s=t?t.env:{};const{fetch:n,Request:r,Response:a}=s,l=[r,a,n];let o=l.length,i=o,c,h,u=_n;for(;i--;)c=l[i],h=u.get(c),h===void 0&&u.set(c,h=i?new Map:An(s)),u=h;return h};Ls();const Rt={http:Hr,xhr:Nn,fetch:{get:Ls}};x.forEach(Rt,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const as=t=>`- ${t}`,En=t=>x.isFunction(t)||t===null||t===!1,zs={getAdapter:(t,s)=>{t=x.isArray(t)?t:[t];const{length:n}=t;let r,a;const l={};for(let o=0;o<n;o++){r=t[o];let i;if(a=r,!En(r)&&(a=Rt[(i=String(r)).toLowerCase()],a===void 0))throw new V(`Unknown adapter '${i}'`);if(a&&(x.isFunction(a)||(a=a.get(s))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(as).join(`
`):" "+as(o[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a},adapters:Rt};function Nt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Le(null,t)}function os(t){return Nt(t),t.headers=ue.from(t.headers),t.data=jt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),zs.getAdapter(t.adapter||Ye.adapter,t)(t).then(function(r){return Nt(t),r.data=jt.call(t,t.transformResponse,r),r.headers=ue.from(r.headers),r},function(r){return Ds(r)||(Nt(t),r&&r.response&&(r.response.data=jt.call(t,t.transformResponse,r.response),r.response.headers=ue.from(r.response.headers))),Promise.reject(r)})}const Is="1.12.2",pt={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{pt[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const ls={};pt.transitional=function(s,n,r){function a(l,o){return"[Axios v"+Is+"] Transitional option '"+l+"'"+o+(r?". "+r:"")}return(l,o,i)=>{if(s===!1)throw new V(a(o," has been removed"+(n?" in "+n:"")),V.ERR_DEPRECATED);return n&&!ls[o]&&(ls[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(l,o,i):!0}};pt.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Tn(t,s,n){if(typeof t!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const l=r[a],o=s[l];if(o){const i=t[l],c=i===void 0||o(i,l,t);if(c!==!0)throw new V("option "+l+" must be "+c,V.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new V("Unknown option "+l,V.ERR_BAD_OPTION)}}const ot={assertOptions:Tn,validators:pt},pe=ot.validators;let _e=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Kt,response:new Kt}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Ee(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:l}=n;r!==void 0&&ot.assertOptions(r,{silentJSONParsing:pe.transitional(pe.boolean),forcedJSONParsing:pe.transitional(pe.boolean),clarifyTimeoutError:pe.transitional(pe.boolean)},!1),a!=null&&(x.isFunction(a)?n.paramsSerializer={serialize:a}:ot.assertOptions(a,{encode:pe.function,serialize:pe.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ot.assertOptions(n,{baseUrl:pe.spelling("baseURL"),withXsrfToken:pe.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=l&&x.merge(l.common,l[n.method]);l&&x.forEach(["delete","get","head","post","put","patch","common"],p=>{delete l[p]}),n.headers=ue.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let u,N=0,_;if(!c){const p=[os.bind(this),void 0];for(p.unshift(...i),p.push(...h),_=p.length,u=Promise.resolve(n);N<_;)u=u.then(p[N++],p[N++]);return u}_=i.length;let m=n;for(;N<_;){const p=i[N++],b=i[N++];try{m=p(m)}catch(j){b.call(this,j);break}}try{u=os.call(this,m)}catch(p){return Promise.reject(p)}for(N=0,_=h.length;N<_;)u=u.then(h[N++],h[N++]);return u}getUri(s){s=Ee(this.defaults,s);const n=Fs(s.baseURL,s.url,s.allowAbsoluteUrls);return Rs(n,s.params,s.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(s){_e.prototype[s]=function(n,r){return this.request(Ee(r||{},{method:s,url:n,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(s){function n(r){return function(l,o,i){return this.request(Ee(i||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}_e.prototype[s]=n(),_e.prototype[s+"Form"]=n(!0)});let Rn=class Bs{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{r.subscribe(i),l=i}).then(a);return o.cancel=function(){r.unsubscribe(l)},o},s(function(l,o,i){r.reason||(r.reason=new Le(l,o,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new Bs(function(a){s=a}),cancel:s}}};function Pn(t){return function(n){return t.apply(null,n)}}function $n(t){return x.isObject(t)&&t.isAxiosError===!0}const Pt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pt).forEach(([t,s])=>{Pt[s]=t});function Us(t){const s=new _e(t),n=bs(_e.prototype.request,s);return x.extend(n,_e.prototype,s,{allOwnKeys:!0}),x.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return Us(Ee(t,a))},n}const ne=Us(Ye);ne.Axios=_e;ne.CanceledError=Le;ne.CancelToken=Rn;ne.isCancel=Ds;ne.VERSION=Is;ne.toFormData=mt;ne.AxiosError=V;ne.Cancel=ne.CanceledError;ne.all=function(s){return Promise.all(s)};ne.spread=Pn;ne.isAxiosError=$n;ne.mergeConfig=Ee;ne.AxiosHeaders=ue;ne.formToJSON=t=>$s(x.isHTMLForm(t)?new FormData(t):t);ne.getAdapter=zs.getAdapter;ne.HttpStatusCode=Pt;ne.default=ne;const{Axios:Ta,AxiosError:Ra,CanceledError:Pa,isCancel:$a,CancelToken:Da,VERSION:Oa,all:Fa,Cancel:Ma,isAxiosError:La,spread:za,toFormData:Ia,AxiosHeaders:Ba,HttpStatusCode:Ua,formToJSON:qa,getAdapter:Ha,mergeConfig:Ga}=ne,Dn="http://localhost:8000/api/v1",re=ne.create({baseURL:Dn,headers:{"Content-Type":"application/json"},timeout:1e4});re.interceptors.request.use(t=>t,t=>Promise.reject(t));re.interceptors.response.use(t=>t,t=>(t.response?(console.error("API Error:",t.response.data),t.response.status===404?console.error("Resource not found"):t.response.status===500&&console.error("Server error")):t.request?console.error("Network Error: No response from server"):console.error("Error:",t.message),Promise.reject(t)));const Ue={getAll:async(t=0,s=100)=>{try{return(await re.get("/students/",{params:{skip:t,limit:s}})).data}catch(n){throw n}},getById:async t=>{try{return(await re.get(`/students/${t}`)).data}catch(s){throw s}},create:async t=>{try{return(await re.post("/students/",t)).data}catch(s){throw s}},update:async(t,s)=>{try{return(await re.put(`/students/${t}`,s)).data}catch(n){throw n}},delete:async t=>{try{return(await re.delete(`/students/${t}`)).data}catch(s){throw s}},getSummary:async t=>{try{return(await re.get(`/analytics/student/${t}/summary`)).data}catch(s){throw s}}},et={getAll:async()=>{try{return(await re.get("/courses/")).data}catch(t){throw t}},create:async t=>{try{return(await re.post("/courses/",t)).data}catch(s){throw s}},update:async(t,s)=>{try{return(await re.put(`/courses/${t}`,s)).data}catch(n){throw n}},delete:async t=>{try{return(await re.delete(`/courses/${t}`)).data}catch(s){throw s}}},qs={create:async t=>{try{return(await re.post("/attendance/",t)).data}catch(s){throw s}},getByStudent:async t=>{try{return(await re.get(`/attendance/student/${t}`)).data}catch(s){throw s}},getByCourse:async t=>{try{return(await re.get(`/attendance/course/${t}`)).data}catch(s){throw s}},bulkCreate:async t=>{try{const s=t.map(r=>re.post("/attendance/",r));return(await Promise.all(s)).map(r=>r.data)}catch(s){throw s}}},gt={create:async t=>{try{return(await re.post("/grades/",t)).data}catch(s){throw s}},getByStudent:async t=>{try{return(await re.get(`/grades/student/${t}`)).data}catch(s){throw s}},getByCourse:async t=>{try{return(await re.get(`/grades/course/${t}`)).data}catch(s){throw s}},calculateAverage:async(t,s)=>{try{const r=(await gt.getByStudent(t)).filter(o=>o.course_id===s);if(r.length===0)return 0;const a=r.reduce((o,i)=>o+i.weight,0),l=r.reduce((o,i)=>{const c=i.grade/i.max_grade*100;return o+c*i.weight},0);return a>0?l/a:0}catch(n){throw n}}},Hs={create:async t=>{try{return(await re.post("/highlights/",t)).data}catch(s){throw s}},getByStudent:async t=>{try{return(await re.get(`/highlights/student/${t}`)).data}catch(s){throw s}},getBySemester:async(t,s)=>{try{return(await Hs.getByStudent(t)).filter(r=>r.semester===s)}catch(n){throw n}}},On=({students:t,searchTerm:s,setSearchTerm:n,onEdit:r,onDelete:a,onViewProfile:l,loading:o,setShowAddModal:i})=>{const{t:c}=ae(),[h,u]=d.useState(""),N=typeof s=="string"?s:h,_=typeof n=="function"?n:u,[m,p]=d.useState(null),[b,j]=d.useState({}),[D,L]=d.useState({});d.useEffect(()=>{const y={};(t||[]).forEach(R=>{const k=`student_notes_${R.id}`,H=localStorage.getItem(k)||"";y[R.id]=H}),L(y)},[t]);const M=d.useMemo(()=>{const y=(N||"").toLowerCase();return y?(t||[]).filter(R=>`${R.first_name} ${R.last_name}`.toLowerCase().includes(y)||String(R.student_id||"").toLowerCase().includes(y)||String(R.email||"").toLowerCase().includes(y)):t||[]},[t,N]),q=async y=>{try{const[R,k]=await Promise.all([qs.getByStudent(y),gt.getByStudent(y)]),H=R.length,C=R.filter(A=>A.status==="Present").length,P=R.filter(A=>A.status==="Absent").length,E=R.filter(A=>A.status==="Late").length,w=R.filter(A=>A.status==="Excused").length,z=H>0?((C+w)/H*100).toFixed(1):"0.0";let $=0;if(k.length>0){const A=k.map(g=>g.grade/g.max_grade*100);$=A.reduce((g,O)=>g+O,0)/A.length}j(A=>({...A,[y]:{attendance:{total:H,present:C,absent:P,late:E,excused:w,attendanceRate:z},grades:{count:k.length,average:Number.isFinite($)?$.toFixed(1):"0.0"}}}))}catch{j(k=>({...k,[y]:{error:!0}}))}},K=y=>{const R=m===y?null:y;p(R),R&&!b[R]&&q(R)},S=(y,R)=>{L(k=>({...k,[y]:R}));try{localStorage.setItem(`student_notes_${y}`,R)}catch{}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("input",{type:"text",value:N,onChange:y=>_(y.target.value),placeholder:c("searchStudents"),className:"border px-4 py-2 rounded w-full max-w-md"}),e.jsx("button",{onClick:()=>i(!0),className:"ml-4 bg-indigo-600 text-white px-4 py-2 rounded",children:c("addStudent")})]}),o&&e.jsx(ys,{}),o&&e.jsx("div",{className:"space-y-2",children:[...Array(3)].map((y,R)=>e.jsx("div",{className:"animate-pulse bg-gray-200 h-20 rounded shadow"},R))}),!o&&M.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-8",children:c("noStudentsFound")}),!o&&M.length>0&&e.jsx("ul",{className:"space-y-2",children:M.map(y=>{var R;return e.jsxs("li",{className:"border p-4 rounded shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[y.first_name," ",y.last_name]}),e.jsx("br",{}),e.jsxs("span",{children:[c("studentId"),": ",y.student_id]}),y.study_year&&e.jsxs("span",{className:"ml-3 text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded",children:[c("year")," ",y.study_year]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>K(y.id),className:"text-gray-700 hover:underline",children:m===y.id?c("close"):c("view")}),e.jsx("button",{onClick:()=>l(y.id),className:"text-blue-600 hover:underline",children:c("view")}),e.jsx("button",{onClick:()=>r(y),className:"text-green-600 hover:underline",children:c("edit")}),e.jsx("button",{onClick:()=>a(y.id),className:"text-red-600 hover:underline",children:c("delete")})]})]}),m===y.id&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"font-semibold mb-2",children:c("notes")}),e.jsx("textarea",{value:D[y.id]||"",onChange:k=>S(y.id,k.target.value),className:"w-full min-h-[120px] border rounded px-3 py-2",placeholder:c("notePlaceholder")})]}),e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"font-semibold mb-2",children:c("performance")}),(R=b[y.id])!=null&&R.error?e.jsx("div",{className:"text-sm text-red-600",children:c("failedToLoadData")}):b[y.id]?e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[c("attendance"),":"]})," ",b[y.id].attendance.present,"/",b[y.id].attendance.total," ",c("present")," • ",b[y.id].attendance.attendanceRate,"%"]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[c("grades"),":"]})," ",b[y.id].grades.count," ",c("assignments")," • ",b[y.id].grades.average,"%"]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:c("loading")})]})]})]},y.id)})})]})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gs=(...t)=>t.filter((s,n,r)=>!!s&&r.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=d.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:o,...i},c)=>d.createElement("svg",{ref:c,...Mn,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:Gs("lucide",a),...i},[...o.map(([h,u])=>d.createElement(h,u)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,s)=>{const n=d.forwardRef(({className:r,...a},l)=>d.createElement(Ln,{ref:l,iconNode:s,className:Gs(`lucide-${Fn(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Y("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=Y("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Y("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=Y("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Y("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Y("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Y("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Y("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Y("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Y("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Y("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Y("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Y("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Y("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Y("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Y("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Y("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Y("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Y("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function Js(t){return{monday:"MO",tuesday:"TU",wednesday:"WE",thursday:"TH",friday:"FR",saturday:"SA",sunday:"SU",δευτέρα:"MO",τρίτη:"TU",τετάρτη:"WE",πέμπτη:"TH",παρασκευή:"FR",σάββατο:"SA",κυριακή:"SU"}[t.toLowerCase()]||"MO"}function ea(t,s){const n=Js(s),r=["SU","MO","TU","WE","TH","FR","SA"].indexOf(n),a=new Date(t),l=a.getDay(),o=(r-l+7)%7;return o===0&&a.getTime()===t.getTime()||a.setDate(a.getDate()+o),a}function ta(t){const s=t.replace(/[^0-9:]/g,""),[n,r]=s.split(":").map(a=>a.padStart(2,"0"));return`${n}${r}00`}function Ks(t){const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${s}${n}${r}`}function kt(t,s){return`${Ks(t)}T${ta(s)}`}function sa(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}@student-management`}function st(t){return t.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function ra(t,s,n){const r=t.teaching_schedule||[];if(r.length===0)throw new Error("No teaching schedule available for this course");const a=new Date,l=new Date(a.getTime()+120*24*60*60*1e3),o=[];return r.forEach(c=>{const h=ea(a,c.day),u=sa(),N=st(`${t.course_code} - ${t.course_name}`),_=c.location?st(c.location):"",m=st(`Course: ${t.course_name}\\nCode: ${t.course_code}\\nSemester: ${t.semester}`),p=`FREQ=WEEKLY;UNTIL=${Ks(l)}T235959Z;BYDAY=${Js(c.day)}`,b=["BEGIN:VEVENT",`UID:${u}`,`DTSTAMP:${kt(new Date,"00:00:00")}`,`DTSTART:${kt(h,c.startTime)}`,`DTEND:${kt(h,c.endTime)}`,`SUMMARY:${N}`,`DESCRIPTION:${m}`,_?`LOCATION:${_}`:null,`RRULE:${p}`,"STATUS:CONFIRMED","TRANSP:OPAQUE","END:VEVENT"].filter(Boolean).join(`\r
`);o.push(b)}),["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Student Management System//Teaching Schedule//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${st(`${t.course_code} - ${t.course_name}`)}`,"X-WR-TIMEZONE:Europe/Athens","X-WR-CALDESC:Teaching schedule for course",...o,"END:VCALENDAR"].join(`\r
`)}function na(t,s){const n=new Blob([t],{type:"text/calendar;charset=utf-8"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=s.endsWith(".ics")?s:`${s}.ics`,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>URL.revokeObjectURL(r.href),100)}const ge="http://localhost:8000/api/v1",aa=({onAddCourse:t,onEdit:s,onDelete:n})=>{const{t:r}=ae(),[a,l]=d.useState([]),[o,i]=d.useState(null),[c,h]=d.useState([]),[u,N]=d.useState({}),[_,m]=d.useState(0),[p,b]=d.useState(!1),[j,D]=d.useState(null),[L,M]=d.useState("evaluation"),[q,K]=d.useState([]),[S,y]=d.useState([]),[R,k]=d.useState([]),[H,C]=d.useState([]),[P,E]=d.useState(!1),w=[r("classParticipation"),r("homework"),r("continuousAssessment"),r("quizzes"),r("midtermExam"),r("finalExam"),r("labWork"),r("project"),r("presentation")],z=[{en:"Monday",el:"Δευτέρα",translated:r("monday")},{en:"Tuesday",el:"Τρίτη",translated:r("tuesday")},{en:"Wednesday",el:"Τετάρτη",translated:r("wednesday")},{en:"Thursday",el:"Πέμπτη",translated:r("thursday")},{en:"Friday",el:"Παρασκευή",translated:r("friday")}];d.useEffect(()=>{U(),A()},[]),d.useEffect(()=>{o&&(X(),g())},[o,a]),d.useEffect(()=>{k([])},[o]);const $=(f,T="info")=>{D({message:f,type:T}),setTimeout(()=>D(null),3e3)},A=async()=>{try{const T=await(await fetch(`${ge}/students/`)).json();K(Array.isArray(T)?T:[])}catch{$(r("failedToLoadData"),"error")}},g=async()=>{if(o)try{const T=await(await fetch(`${ge}/enrollments/course/${o}/students`)).json();y(Array.isArray(T)?T:[])}catch{y([])}},O=async()=>{if(!(!o||R.length===0))try{if(!(await fetch(`${ge}/enrollments/course/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_ids:R})})).ok)throw new Error("fail");$(r("studentsEnrolled")||"Students enrolled","success"),k([]),g()}catch{$(r("failedToSaveData"),"error")}},J=async f=>{if(o)try{if(!(await fetch(`${ge}/enrollments/course/${o}/student/${f}`,{method:"DELETE"})).ok)throw new Error("fail");$(r("studentUnenrolled")||"Student unenrolled","success"),g()}catch{$(r("failedToSaveData"),"error")}},U=async()=>{try{const T=await(await fetch(`${ge}/courses/`)).json();l(Array.isArray(T)?T:[])}catch{$(r("failedToLoadData"),"error")}},X=()=>{const f=a.find(T=>T.id===o);if(f){h(f.evaluation_rules||[]);let T={};f.teaching_schedule&&(Array.isArray(f.teaching_schedule)?f.teaching_schedule.forEach(B=>{B.day&&(T[B.day]={periods:B.periods||1,start_time:B.start_time||"17:00",duration:B.duration||45})}):T=f.teaching_schedule),N(T),m(f.hours_per_week||0)}else h([]),N({}),m(0)},Z=()=>{h([...c,{category:"",weight:"",description:""}])},ee=(f,T,B)=>{const te=[...c];te[f][T]=B,h(te)},ie=f=>{h(c.filter((T,B)=>B!==f))},Ie=()=>{if(c.length===0)return $(r("pleaseAddRule"),"error"),!1;const f=c.reduce((T,B)=>T+(parseFloat(String(B.weight))||0),0);if(Math.abs(f-100)>.01)return $(`${r("totalWeight")} ${f.toFixed(1)}%. ${r("totalMustEqual")}`,"error"),!1;for(const T of c)if(!T.category||!T.weight)return $(r("allRulesRequired"),"error"),!1;return!0},Te=f=>{N(T=>{const B={...T};return B[f]?delete B[f]:B[f]={periods:1,start_time:"17:00",duration:45},B})},fe=(f,T,B)=>{N(te=>({...te,[f]:{...te[f],[T]:T==="periods"||T==="duration"?parseInt(B):B}}))},Xe=()=>{let f=0;return Object.values(u).forEach(T=>{T.periods&&T.duration&&(f+=(T.periods||0)*((T.duration||0)/60))}),f.toFixed(1)},ft=async()=>{if(!o||Object.keys(u).length===0)return C([]),[];try{if(!a.find(he=>he.id===o))return[];const B=await(await fetch(`${ge}/enrollments/course/${o}/students`)).json();if(!Array.isArray(B)||B.length===0)return C([]),[];const te={};for(const he of B){const ve=he.study_year||0;te[ve]||(te[ve]=[]),te[ve].push(he)}const ce=[];for(const[he,ve]of Object.entries(te))for(const Qe of ve){const zt=await(await fetch(`${ge}/enrollments/student/${Qe.id}`)).json();if(Array.isArray(zt))for(const It of zt){if(It.course_id===o)continue;const Se=a.find(xe=>xe.id===It.course_id);if(!Se||!Se.teaching_schedule)continue;let Re={};Array.isArray(Se.teaching_schedule)?Se.teaching_schedule.forEach(xe=>{xe.day&&(Re[xe.day]={periods:xe.periods||1,start_time:xe.start_time||"17:00",duration:xe.duration||45})}):Re=Se.teaching_schedule;for(const[xe,yt]of Object.entries(u))if(Re[xe]){const Bt=yt.start_time,Qs=yt.duration*yt.periods,Ut=Re[xe].start_time,Zs=Re[xe].duration*Re[xe].periods,qt=sr=>{const[rr,nr]=sr.split(":").map(Number);return rr*60+nr},Ht=qt(Bt),er=Ht+Qs,Gt=qt(Ut),tr=Gt+Zs;Ht<tr&&Gt<er&&ce.push({student:`${Qe.first_name} ${Qe.last_name}`,studentYear:Qe.study_year||"Unknown",course:`${Se.course_code} - ${Se.course_name}`,day:xe,time:Bt,conflictTime:Ut})}}}return C(ce),ce.length>0&&E(!0),ce}catch(f){return console.error("Error checking conflicts:",f),[]}},v=async()=>{if(!(L==="evaluation"&&!Ie())){if(L==="schedule"&&(await ft()).length>0&&!P){E(!0);return}b(!0);try{const f=parseFloat(Xe()),T=Object.entries(u||{}).map(([te,ce])=>({day:te,periods:Number(ce.periods)||0,start_time:ce.start_time||"08:00",duration:Number(ce.duration)||0}));if(((T==null?void 0:T.length)||0)>0&&(!Number.isFinite(f)||f<.5)){$(r("hoursPerWeekTooLow")||"Hours per week must be at least 0.5 when a schedule is set","error"),b(!1);return}const B={evaluation_rules:c,teaching_schedule:T,hours_per_week:Number.isFinite(f)?f:0};await fetch(`${ge}/courses/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),$(r("courseDataSaved"),"success"),U()}catch{$(r("failedToSaveData"),"error")}finally{b(!1)}}},I=()=>{try{if(!we){$(r("pleaseSelectCourse"),"error");return}const f=Object.entries(u||{}).map(([ce,he])=>({day:ce,startTime:he.start_time||"17:00",endTime:F(he.start_time||"17:00",he.duration||0),location:""}));if(f.length===0){$(r("noScheduleToExport"),"error");return}const T={course_code:we.course_code,course_name:we.course_name,semester:we.semester||"Current Semester",teaching_schedule:f},B=ra(T),te=`${we.course_code}_schedule.ics`;na(B,te),$(r("scheduleExported"),"success")}catch(f){console.error("Export error:",f),$(r("scheduleExportError"),"error")}},F=(f,T)=>{const[B,te]=f.split(":").map(Number),ce=B*60+te+T,he=Math.floor(ce/60)%24,ve=ce%60;return`${String(he).padStart(2,"0")}:${String(ve).padStart(2,"0")}`},Q=c.reduce((f,T)=>f+(parseFloat(String(T.weight))||0),0),W=Math.abs(Q-100)<.01,se=Xe(),oe=Object.keys(u||{}).length>0,Lt=!oe||parseFloat(se)>=.5,we=a.find(f=>f.id===o);return e.jsxs("div",{className:"space-y-6",children:[j&&e.jsx("div",{className:`fixed top-4 right-4 ${j.type==="success"?"bg-green-500":j.type==="error"?"bg-red-500":"bg-blue-500"} text-white px-6 py-3 rounded-lg shadow-lg z-50`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{size:20}),e.jsx("span",{children:j.message})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-3 rounded-xl",children:e.jsx(xs,{className:"text-white",size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:r("courseManagementTitle")}),e.jsx("p",{className:"text-gray-600",children:r("configureCourseSettings")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>t&&t(),className:"inline-flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:shadow transition-colors",children:[e.jsx(us,{size:18}),e.jsx("span",{children:r("addCourse")})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>we&&s&&s(we),className:"inline-flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(xs,{size:16}),e.jsx("span",{children:r("editCourse")})]}),e.jsxs("button",{onClick:()=>o&&n&&n(o),className:"inline-flex items-center space-x-2 px-3 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:[e.jsx(hs,{size:16}),e.jsx("span",{children:r("delete")})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",htmlFor:"course-select",children:r("selectCourseForRules")}),e.jsxs("select",{id:"course-select",value:o||"",onChange:f=>i(parseInt(f.target.value)||null),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",title:r("selectCourseForRules"),children:[e.jsx("option",{value:"",children:r("chooseCourse")}),a.map(f=>e.jsxs("option",{value:f.id,children:[f.course_code," - ",f.course_name]},f.id))]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>M("evaluation"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center space-x-2 ${L==="evaluation"?"bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(cs,{size:20}),e.jsx("span",{children:r("evaluationRules")})]}),e.jsxs("button",{onClick:()=>M("schedule"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center space-x-2 ${L==="schedule"?"bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ze,{size:20}),e.jsx("span",{children:r("teachingSchedule")})]}),e.jsxs("button",{onClick:()=>M("enrollment"),className:`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center space-x-2 ${L==="enrollment"?"bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(We,{size:20}),e.jsx("span",{children:r("enrollment")||"Enrollment"})]})]}),L==="evaluation"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:r("gradingComponents")}),e.jsxs("button",{onClick:Z,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all flex items-center space-x-2",children:[e.jsx(us,{size:18}),e.jsx("span",{children:r("addRule")})]})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(cs,{size:48,className:"mx-auto mb-4 opacity-30"}),e.jsx("p",{children:r("noRulesDefined")}),e.jsx("p",{className:"text-sm",children:r("clickToStart")})]}):e.jsxs("div",{className:"space-y-4",children:[c.map((f,T)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"md:col-span-5",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:r("categoryName")}),e.jsx("input",{type:"text",value:f.category,onChange:B=>ee(T,"category",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:`${r("exampleLabel")}: ${r("midtermExam")}`,list:`categories-${T}`}),e.jsx("datalist",{id:`categories-${T}`,children:w.map((B,te)=>e.jsx("option",{value:B},te))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:r("weight")}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:f.weight,onChange:B=>ee(T,"weight",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:"20"})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:r("ruleDescription")}),e.jsx("input",{type:"text",value:f.description||"",onChange:B=>ee(T,"description",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm",placeholder:r("optional")})]}),e.jsx("div",{className:"md:col-span-1 flex items-end",children:e.jsx("button",{onClick:()=>ie(T),className:"w-full p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:r("remove"),children:e.jsx(hs,{size:18})})})]})},T)),e.jsxs("div",{className:`mt-6 p-4 rounded-lg border-2 ${W?"bg-green-50 border-green-500":"bg-orange-50 border-orange-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:r("totalWeight")}),e.jsxs("span",{className:`text-2xl font-bold ${W?"text-green-600":"text-orange-600"}`,children:[Q.toFixed(1),"%"]})]}),!W&&e.jsxs("p",{className:"text-sm text-orange-600 mt-2 flex items-center space-x-1",children:[e.jsx(je,{size:16}),e.jsx("span",{children:r("totalMustEqual")})]})]})]})]}),L==="schedule"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:r("weeklyTeachingSchedule")}),e.jsx("p",{className:"text-gray-600",children:r("configureWeeklyDistribution")})]}),oe&&e.jsxs("button",{onClick:I,className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-md",title:r("exportScheduleToCalendar"),children:[e.jsx($t,{size:18}),e.jsx("span",{children:r("exportSchedule")})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6 border border-blue-200",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("totalHoursPerWeek")}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:se}),e.jsx("p",{className:"text-xs text-gray-500",children:r("hours")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("teachingDays")}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Object.keys(u).length}),e.jsx("p",{className:"text-xs text-gray-500",children:r("daysPerWeek")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("totalPeriods")}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:Object.values(u).reduce((f,T)=>f+(T.periods||0),0)}),e.jsx("p",{className:"text-xs text-gray-500",children:r("periodsPerWeek")})]})]}),oe&&!Lt&&e.jsx("div",{className:"mt-3 text-sm text-orange-700 bg-orange-50 border border-orange-200 rounded p-3",children:r("hoursPerWeekTooLow")||"Hours per week must be at least 0.5 when a schedule is set."})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6 border-2 border-purple-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ct,{size:24,className:"text-purple-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:r("scheduleNote")}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("p",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"font-semibold",children:[r("intermissionInfo"),":"]})}),e.jsxs("p",{className:"ml-4",children:["• ",r("intermission1")]}),e.jsxs("p",{className:"ml-4",children:["• ",r("intermission2")]})]})]})]})}),P&&H.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-5 mb-6 border-2 border-red-300",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(je,{size:28,className:"text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-red-900 text-lg mb-2",children:r("scheduleConflictDetected")}),e.jsx("p",{className:"text-red-700 mb-3",children:r("scheduleConflictWarning")}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-200",children:[e.jsxs("p",{className:"font-semibold text-gray-800 mb-2",children:[r("conflictDetails"),":"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:H.slice(0,10).map((f,T)=>e.jsxs("div",{className:"text-sm bg-red-50 p-2 rounded border-l-4 border-red-400",children:[e.jsxs("p",{className:"font-semibold",children:[f.student," ",e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded",children:[r("year")," ",f.studentYear]})]}),e.jsx("p",{className:"text-gray-600",children:f.course}),e.jsxs("p",{className:"text-xs text-gray-500",children:[f.day,": ",f.time," ↔ ",f.conflictTime]})]},T))})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>E(!1),className:"bg-white border-2 border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:r("editSchedule")}),e.jsx("button",{onClick:async()=>{E(!1),C([]),await v()},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-medium",children:r("saveAnyway")})]})]})]})}),e.jsx("div",{className:"space-y-4",children:z.map(f=>{const T=u[f.en],B=u[f.en]||{periods:1,start_time:"17:00",duration:45};return e.jsx("div",{className:`rounded-lg border-2 transition-all ${T?"bg-indigo-50 border-indigo-500":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>Te(f.en),className:`w-6 h-6 rounded border-2 transition-all ${T?"bg-indigo-600 border-indigo-600":"border-gray-300 hover:border-indigo-400"}`,children:T&&e.jsx("svg",{className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold ${T?"text-indigo-900":"text-gray-700"}`,children:f.translated}),T&&e.jsxs("p",{className:"text-sm text-indigo-600",children:[B.periods," ",B.periods===1?r("period"):r("periods")," × ",B.duration," ",r("minutes")]})]})]}),T&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:(B.periods*B.duration/60).toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-600",children:r("hours")})]})]}),T&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-indigo-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",htmlFor:`periods-${f.en}`,children:r("numberOfPeriods")}),e.jsx("input",{id:`periods-${f.en}`,type:"number",min:"1",max:"10",value:B.periods,onChange:te=>fe(f.en,"periods",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",title:r("numberOfPeriods")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",htmlFor:`starttime-${f.en}`,children:r("startTime")}),e.jsx("input",{id:`starttime-${f.en}`,type:"time",value:B.start_time,onChange:te=>fe(f.en,"start_time",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",title:r("startTime")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",htmlFor:`duration-${f.en}`,children:[r("periodDuration")," (",r("minutes"),")"]}),e.jsxs("select",{id:`duration-${f.en}`,value:B.duration,onChange:te=>fe(f.en,"duration",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",title:`${r("periodDuration")} (${r("minutes")})`,children:[e.jsxs("option",{value:"45",children:["45 ",r("minutes")," (Default)"]}),e.jsxs("option",{value:"50",children:["50 ",r("minutes")]}),e.jsxs("option",{value:"60",children:["60 ",r("minutes")]}),e.jsxs("option",{value:"90",children:["90 ",r("minutes")]}),e.jsxs("option",{value:"120",children:["120 ",r("minutes")]})]})]})]})]})},f.en)})})]}),L==="enrollment"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:r("enrollmentManagement")||"Enrollment Management"}),e.jsx("p",{className:"text-gray-600",children:r("assignStudentsToCourse")||"Assign students to this course"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("h4",{className:"font-semibold mb-2",children:r("allStudents")||"All Students"}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{type:"text",placeholder:r("search")||"Search",className:"w-full px-3 py-2 border rounded",onChange:f=>{const T=f.target.value.toLowerCase();q.filter(B=>`${B.first_name} ${B.last_name} ${B.student_id}`.toLowerCase().includes(T))}})}),e.jsx("div",{className:"max-h-72 overflow-auto space-y-2",children:q.map(f=>{const T=S.some(B=>B.id===f.id);return e.jsxs("label",{className:`flex items-center justify-between bg-white rounded p-2 border ${T?"opacity-60":""}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[f.first_name," ",f.last_name]}),e.jsx("div",{className:"text-xs text-gray-500",children:f.student_id})]}),e.jsx("input",{type:"checkbox",disabled:T,checked:R.includes(f.id),onChange:B=>{k(te=>B.target.checked?[...te,f.id]:te.filter(ce=>ce!==f.id))}})]},f.id)})}),e.jsx("div",{className:"mt-3 text-right",children:e.jsx("button",{onClick:O,disabled:R.length===0,className:"px-4 py-2 bg-indigo-600 text-white rounded disabled:opacity-50",children:r("enrollSelected")||"Enroll Selected"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("h4",{className:"font-semibold mb-2",children:r("enrolledStudents")||"Enrolled Students"}),e.jsxs("div",{className:"max-h-96 overflow-auto space-y-2",children:[S.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:r("noStudentsEnrolled")||"No students enrolled yet"}),S.map(f=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded p-2 border",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[f.first_name," ",f.last_name]}),e.jsx("div",{className:"text-xs text-gray-500",children:f.student_id})]}),e.jsx("button",{onClick:()=>J(f.id),className:"px-3 py-1 text-red-600 border border-red-300 rounded",children:r("unenroll")||"Unenroll"})]},f.id))]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:async()=>{L==="evaluation"?h([]):(N({}),setTimeout(async()=>{b(!0);try{const f={evaluation_rules:c,teaching_schedule:[],hours_per_week:0};await fetch(`${ge}/courses/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),$(r("scheduleCleared")||"Schedule cleared successfully","success"),U(),C([]),E(!1)}catch{$(r("failedToSaveData"),"error")}finally{b(!1)}},100))},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:r("clearAll")}),e.jsxs("button",{onClick:v,disabled:p||L==="evaluation"&&!W||L==="schedule"&&!Lt,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all font-medium disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(Vs,{size:20}),e.jsx("span",{children:r(p?"saving":"saveChanges")})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center space-x-2",children:[e.jsx(We,{size:20,className:"text-indigo-600"}),e.jsx("span",{children:r("exampleSchedule")})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-white rounded",children:[e.jsxs("span",{children:[r("monday"),": 2 ",r("periods")," (08:00, 50 ",r("minutes"),")"]}),e.jsxs("span",{className:"font-bold text-indigo-600",children:["1.67 ",r("hours")]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-white rounded",children:[e.jsxs("span",{children:[r("wednesday"),": 1 ",r("period")," (10:00, 50 ",r("minutes"),")"]}),e.jsxs("span",{className:"font-bold text-indigo-600",children:["0.83 ",r("hours")]})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-white rounded",children:[e.jsxs("span",{children:[r("friday"),": 2 ",r("periods")," (14:00, 50 ",r("minutes"),")"]}),e.jsxs("span",{className:"font-bold text-indigo-600",children:["1.67 ",r("hours")]})]}),e.jsxs("div",{className:"flex justify-between p-3 bg-indigo-100 rounded font-bold",children:[e.jsx("span",{children:r("totalHoursPerWeek")}),e.jsxs("span",{className:"text-indigo-600",children:["4.17 ",r("hours")]})]})]})]})]})},dt=t=>t<=0?0:t>=4?100:t/4*100,lt=t=>t<=0?0:t>=4?20:t/4*20,Ys=(t,s="el")=>{const n={el:{excellent:"Άριστα",veryGood:"Λίαν Καλώς",good:"Καλώς",pass:"Μέτρια",fail:"Ανεπιτυχώς"},en:{excellent:"Excellent",veryGood:"Very Good",good:"Good",pass:"Pass",fail:"Fail"}},r=n[s]||n.el;return t>=18?r.excellent:t>=16?r.veryGood:t>=13?r.good:t>=10?r.pass:r.fail},Xs=t=>t>=18?"text-green-600":t>=16?"text-blue-600":t>=13?"text-yellow-600":t>=10?"text-orange-600":"text-red-600",oa=t=>t>=18?"from-green-500 to-green-600":t>=16?"from-blue-500 to-blue-600":t>=13?"from-yellow-500 to-yellow-600":t>=10?"from-orange-500 to-orange-600":"from-red-500 to-red-600",ms=t=>{const s=dt(t),n=lt(t);return{gpa:t.toFixed(2),percentage:s.toFixed(1),greekGrade:n.toFixed(1),description:Ys(n),color:Xs(n),bgColor:oa(n)}},Dt=t=>t>=90?"A":t>=80?"B":t>=70?"C":t>=60?"D":"F",ps="http://localhost:8000/api/v1",rt=({title:t,value:s,icon:n,color:r,subtitle:a})=>{const l={indigo:"from-indigo-500 to-indigo-600",purple:"from-purple-500 to-purple-600",green:"from-green-500 to-green-600",yellow:"from-yellow-500 to-yellow-600"};return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:s}),a&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a})]}),e.jsx("div",{className:`bg-gradient-to-br ${l[r]} p-4 rounded-xl shadow-lg`,children:e.jsx(n,{className:"text-white",size:24})})]})})},la=({students:t,courses:s,stats:n,onOpenAnalytics:r})=>{const{t:a}=ae(),[l,o]=d.useState([]),[i,c]=d.useState(!0),[h,u]=d.useState(!1),[N,_]=d.useState(0),[m,p]=d.useState(0),[b,j]=d.useState(!1),D=fs.useRef(null),L=d.useMemo(()=>t.length,[t.length]),M=d.useMemo(()=>s.length,[s.length]);d.useEffect(()=>{!b&&L>0&&(K(),j(!0))},[L,b]),d.useEffect(()=>{M>0&&q()},[M]);const q=d.useCallback(async()=>{if(s.length===0){_(0),p(0);return}try{const y=await(await fetch(`${ps}/enrollments/?limit=500`)).json();if(Array.isArray(y)&&y.length>0){const R=y.reduce((H,C)=>(C.course_id&&(H[C.course_id]=(H[C.course_id]||0)+1),H),{}),k=Object.keys(R).length;if(p(k),k>0){const C=Object.values(R).reduce((P,E)=>P+E,0)/k;_(Math.round(C))}else _(0)}else _(0),p(0)}catch(S){console.error("Error loading enrollment stats:",S),_(0),p(0)}},[s.length]),K=d.useCallback(async()=>{if(t.length===0){c(!1);return}c(!0);try{const S=t.slice(0,5).map(async k=>{var H;try{const C=new AbortController,P=setTimeout(()=>C.abort(),5e3),E=await fetch(`${ps}/analytics/student/${k.id}/all-courses-summary`,{signal:C.signal});clearTimeout(P);const w=await E.json();return{...k,overallGPA:w.overall_gpa||0,totalCourses:((H=w.courses)==null?void 0:H.length)||0,totalCredits:w.total_credits||0}}catch{return{...k,overallGPA:0,totalCourses:0,totalCredits:0}}}),R=(await Promise.all(S)).filter(k=>k.overallGPA>0).sort((k,H)=>H.overallGPA-k.overallGPA).slice(0,5);o(R)}catch(S){console.error("Error loading dashboard data:",S)}finally{c(!1)}},[t.length]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:a("dashboardTitle")}),e.jsxs("button",{type:"button",onClick:()=>{h?(u(!1),window.scrollTo({top:0,behavior:"smooth"})):(u(!0),setTimeout(()=>{var S;(S=D.current)==null||S.scrollIntoView({behavior:"smooth",block:"start"})},100))},className:"text-indigo-600 hover:text-indigo-700 font-medium flex items-center space-x-2 transition-all hover:scale-105",children:[e.jsx("span",{children:a(h?"hideDetailedAnalytics":"viewDetailedAnalytics")}),e.jsx(In,{size:20,className:`transition-transform ${h?"rotate-90":""}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(rt,{title:a("totalStudents"),value:n.totalStudents||0,icon:$e,color:"indigo",subtitle:`${n.activeStudents||0} ${a("active").toLowerCase()}`}),e.jsx(rt,{title:a("activeCourses"),value:m,icon:We,color:"purple",subtitle:a("withEnrollments")}),e.jsx(rt,{title:a("avgClassSize"),value:N,icon:Fe,color:"green",subtitle:a("studentsPerCourse")}),e.jsx(rt,{title:a("enrollmentRate"),value:n.totalStudents?`${Math.round(n.activeStudents/n.totalStudents*100)}%`:"0%",icon:Ne,color:"yellow",subtitle:a("activeEnrollment")})]}),h&&e.jsxs("div",{ref:D,children:[i&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:a("loadingStudentData")})]}),!i&&l.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx(Ge,{className:"text-yellow-500",size:20}),e.jsx("span",{children:a("topPerformers")})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((S,y)=>{const R=Number(S.overallGPA||0),k=ms(R),H=dt(R),C=Dt(H),P=(H/100*100).toFixed(0);return e.jsxs("div",{className:"border rounded-xl p-4 hover:shadow transition",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[S.first_name," ",S.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:S.student_id})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[k.percentage,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:a("percentage")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 rounded-lg px-4 py-2 border-2 border-indigo-300",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:P}),e.jsx("div",{className:"text-xs text-indigo-600 font-semibold",children:"/ 100"})]})]})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["GPA: ",k.gpa," • ",k.greekGrade,"/20 • ",C]}),e.jsx("div",{className:`mt-1 text-xs ${k.color}`,children:k.description}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center space-x-2",children:[e.jsx(Oe,{size:16,className:"text-indigo-500"}),e.jsxs("span",{children:[S.totalCourses||0," ",a("courses")||"courses"]})]})]},y)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx(Oe,{size:24,className:"text-yellow-500"}),e.jsx("span",{children:a("topPerformingStudents")})]}),e.jsx("span",{className:"text-sm text-gray-500",children:a("byGPA")})]}),l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Zn,{size:48,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{children:a("noPerformanceData")}),e.jsx("p",{className:"text-sm mt-1",children:a("studentsNeedGrades")})]}):e.jsx("div",{className:"space-y-3",children:l.map((S,y)=>{const R=Number(S.overallGPA||0),k=ms(R),H=dt(R),C=Dt(H),P=(H/100*100).toFixed(0);return e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${y===0?"bg-yellow-50 border-yellow-500":y===1?"bg-gray-50 border-gray-400":y===2?"bg-orange-50 border-orange-400":"bg-blue-50 border-blue-400"} hover:shadow-md transition-shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[S.first_name," ",S.last_name]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.totalCourses||0," ",a("courses")||"courses"," • ",S.totalCredits||0," ",a("credits")||"credits"]}),e.jsxs("p",{className:`text-xs ${k.color}`,children:[k.description," • ",k.greekGrade,"/20 • ",C]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-indigo-600",children:[k.percentage,"%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["GPA: ",k.gpa]})]}),e.jsxs("div",{className:"bg-white rounded-lg px-8 py-3 border-2 border-indigo-300 shadow-sm",children:[e.jsx("p",{className:"text-xl font-bold text-indigo-700",children:P}),e.jsx("p",{className:"text-xs text-indigo-700 font-semibold",children:"/ 100"})]})]})]})},S.id||y)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[e.jsx(We,{size:24,className:"text-purple-600"}),e.jsx("span",{children:a("activeCourses")||"Active Courses"})]}),e.jsx("div",{className:"space-y-3",children:s&&s.length>0?s.slice(0,6).map(S=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:S.course_code}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.course_name}),S.semester&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S.semester})]}),e.jsxs("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:[S.credits||0," ",a("creditsAbbr")||"cr"]})]}),Array.isArray(S.evaluation_rules)&&S.evaluation_rules.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-purple-200",children:e.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-1",children:[e.jsx(Ne,{size:12,className:"text-green-600"}),e.jsx("span",{children:a("evaluationRulesConfigured")||"Evaluation rules configured"})]})})]},S.id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:a("noCoursesAvailable")||"No courses available"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(ze,{size:24}),e.jsx("h4",{className:"font-bold text-lg",children:a("thisWeek")})]}),e.jsx("p",{className:"text-3xl font-bold mb-2",children:(t||[]).filter(S=>S.is_active!==!1).length}),e.jsx("p",{className:"text-sm opacity-90",children:a("activeStudents")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Ge,{size:24}),e.jsx("h4",{className:"font-bold text-lg",children:a("assessments")})]}),e.jsx("p",{className:"text-3xl font-bold mb-2",children:l.reduce((S,y)=>S+(y.totalCourses||0),0)}),e.jsx("p",{className:"text-sm opacity-90",children:a("totalEnrollments")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Fe,{size:24}),e.jsx("h4",{className:"font-bold text-lg",children:a("performance")})]}),l.length>0?(()=>{const S=l.reduce((R,k)=>R+(k.overallGPA||0),0)/l.length,y=S/4*100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-baseline space-x-2 mb-1",children:[e.jsxs("p",{className:"text-3xl font-bold",children:[y.toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm opacity-75",children:["• GPA ",S.toFixed(2)]})]}),e.jsx("p",{className:"text-sm opacity-90",children:a("averageGPATop")})]})})():e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-3xl font-bold mb-2",children:"0.0%"}),e.jsx("p",{className:"text-sm opacity-90",children:a("averageGPATop")})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[e.jsx($e,{size:24,className:"text-indigo-600"}),e.jsx("span",{children:a("recentStudents")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(t||[]).slice(0,6).map(S=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-indigo-50 transition-colors border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:[String(S.first_name||"").charAt(0),String(S.last_name||"").charAt(0)]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[S.first_name," ",S.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:S.student_id}),S.enrollment_date&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[a("enrolled")||"Enrolled"," ",new Date(S.enrollment_date).toLocaleDateString()]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 text-xs font-medium ${S.is_active!==!1?"text-green-600":"text-red-600"}`,children:[e.jsx(Ne,{size:14}),e.jsx("span",{children:S.is_active!==!1?a("active")||"Active":a("inactive")||"Inactive"})]})})]},S.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[e.jsx($e,{size:24,className:"text-green-600"}),e.jsx("span",{children:a("yearAnalytics")})]}),(()=>{const S={};return(t||[]).forEach(y=>{const R=y.study_year||0,k=R===0?a("unknownYear"):`${a("year")} ${R}`;S[k]=(S[k]||0)+1}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(S).sort().map(([y,R],k)=>e.jsxs("div",{className:`p-4 rounded-xl border-2 ${k===0?"bg-blue-50 border-blue-300":k===1?"bg-green-50 border-green-300":k===2?"bg-yellow-50 border-yellow-300":"bg-purple-50 border-purple-300"}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:y}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-gray-800",children:R}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(R/(t||[]).length*100).toFixed(1),"% ",a("totalStudents").toLowerCase()]})]},y))})})()]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:a("systemInformation")||"System Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:(t||[]).length}),e.jsx("p",{className:"text-sm opacity-90",children:a("totalStudents")})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:(s||[]).length}),e.jsx("p",{className:"text-sm opacity-90",children:a("totalCourses")||"Total courses"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:(s||[]).filter(S=>Array.isArray(S.evaluation_rules)&&S.evaluation_rules.length>0).length}),e.jsx("p",{className:"text-sm opacity-90",children:a("configuredCourses")||"Configured courses"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:n.activeStudents||0}),e.jsx("p",{className:"text-sm opacity-90",children:a("activeEnrollment")||"Active enrollment"})]})]})]})]})]})},ia=({courses:t})=>{const{t:s}=ae(),n=[{key:"Monday",displayName:s("monday")},{key:"Tuesday",displayName:s("tuesday")},{key:"Wednesday",displayName:s("wednesday")},{key:"Thursday",displayName:s("thursday")},{key:"Friday",displayName:s("friday")}],r={};for(const a of n)r[a.key]=[];return t.forEach(a=>{const l=a.teaching_schedule||{};Array.isArray(l)?l.forEach(o=>{const i=o==null?void 0:o.day;if(!i||!r[i])return;const c={periods:o.periods,start_time:o.start_time,duration:o.duration};r[i].push({course:a,sched:c})}):typeof l=="object"&&Object.keys(l).forEach(o=>{r[o]&&r[o].push({course:a,sched:l[o]})})}),Object.keys(r).forEach(a=>{r[a].sort((l,o)=>l.sched.start_time>o.sched.start_time?1:-1)}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx(ze,{size:22,className:"text-indigo-600"}),e.jsx("span",{children:s("teachingSchedule")})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(a=>e.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:a.displayName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r[a.key].length," ",s("classes")]})]}),r[a.key].length===0?e.jsx("div",{className:"text-sm text-gray-500",children:s("noClasses")}):e.jsx("div",{className:"space-y-2",children:r[a.key].map(({course:l,sched:o},i)=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:[l.course_code," - ",l.course_name]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[e.jsx(ct,{size:14}),e.jsxs("span",{children:[o.start_time," · ",o.periods," × ",o.duration,"m"]})]})]})},l.id+"-"+i))})]},a.key))})]})},ye="http://localhost:8000/api/v1",ca=({courses:t,students:s})=>{const{t:n,language:r}=ae()||{t:v=>v,language:"en"},[a,l]=d.useState(new Date),[o,i]=d.useState(new Date),[c,h]=d.useState(""),[u,N]=d.useState(t||[]),[_,m]=d.useState(new Set),[p,b]=d.useState({}),[j,D]=d.useState({}),[L,M]=d.useState([]),[q,K]=d.useState([]),[S,y]=d.useState(!1),[R,k]=d.useState(null),[H,C]=d.useState(!1),[P,E]=d.useState(null),w=d.useMemo(()=>n("dayNames")?n("dayNames").split(","):["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],[n]),z=(v,I="success")=>{k({message:v,type:I}),setTimeout(()=>k(null),2500)},$=v=>v.toISOString().split("T")[0],A=v=>`${v}-${$(a)}`,g=["Class Participation",n("classParticipation"),"Homework/Assignments","Homework",n("homework"),"Lab Work",n("labWork"),"Continuous Assessment",n("continuousAssessment"),"Quizzes",n("quizzes"),"Project",n("project"),"Presentation",n("presentation")];d.useEffect(()=>{if(!c){M([]);return}try{const v=u.find(I=>I.id===c);if(v!=null&&v.evaluation_rules){const I=v.evaluation_rules.filter(F=>g.some(G=>{var Q,W,se;return((Q=F.category)==null?void 0:Q.includes(G))||((se=(W=F.category)==null?void 0:W.toLowerCase)==null?void 0:se.call(W).includes(G.toLowerCase()))}));M(I)}else M([])}catch{M([])}},[c,u]),d.useEffect(()=>{N(Array.isArray(t)?t:[])},[t]),d.useEffect(()=>{(async()=>{if(!(u&&u.length>0))try{const F=await(await fetch(`${ye}/courses/`)).json();N(Array.isArray(F)?F:[])}catch{N([])}})()},[u==null?void 0:u.length]),d.useEffect(()=>{(async()=>{if(!u||u.length===0){m(new Set);return}try{const I=await Promise.all(u.map(async G=>{try{const Q=await fetch(`${ye}/enrollments/course/${G.id}/students`);if(!Q.ok)return{id:G.id,count:0};const W=await Q.json();return{id:G.id,count:Array.isArray(W)?W.length:0}}catch{return{id:G.id,count:0}}})),F=new Set;I.forEach(({id:G,count:Q})=>{Q>0&&F.add(G)}),m(F)}catch{m(new Set)}})()},[u]),d.useEffect(()=>{if(c&&!_.has(c)){const v=u.find(I=>_.has(I.id));h(v?v.id:"")}},[_]),d.useEffect(()=>{!c&&u&&u.length>0&&h(u[0].id)},[u,c]),d.useEffect(()=>{(async()=>{if(c)try{const I=await fetch(`${ye}/courses/${c}`);if(!I.ok)return;const F=await I.json();N(G=>{const Q=G.findIndex(se=>se.id===c);if(Q===-1)return G;const W=[...G];return W[Q]={...W[Q],...F},W})}catch{}})()},[c]),d.useEffect(()=>{(async()=>{if(!c){K([]);return}try{const F=await(await fetch(`${ye}/enrollments/course/${c}/students`)).json();K(Array.isArray(F)?F:[])}catch{K([])}})()},[c]),d.useEffect(()=>{(async()=>{if(!c||!a)return;const I=$(a);try{const F=await fetch(`${ye}/attendance/date/${I}/course/${c}`);if(F.ok){const Q=await F.json(),W={};Array.isArray(Q)&&Q.forEach(se=>{W[`${se.student_id}-${I}`]=se.status}),b(W)}else b({});const G=await fetch(`${ye}/daily-performance/date/${I}/course/${c}`);if(G.ok){const Q=await G.json(),W={};Array.isArray(Q)&&Q.forEach(se=>{W[`${se.student_id}-${se.category}`]=se.score}),D(W)}else D({})}catch{b({}),D({})}})()},[c,a]);const O=()=>i(new Date(o.getFullYear(),o.getMonth()-1)),J=()=>i(new Date(o.getFullYear(),o.getMonth()+1)),X=(v=>{const I=v.getFullYear(),F=v.getMonth(),G=new Date(I,F,1),Q=new Date(I,F+1,0),W=[],se=G.getDay();for(let oe=0;oe<se;oe++)W.push(null);for(let oe=1;oe<=Q.getDate();oe++)W.push(new Date(I,F,oe));return W})(o),Z=o.toLocaleDateString(r==="el"?"el-GR":"en-US",{month:"long",year:"numeric"}),ee=v=>v?v.toDateString()===new Date().toDateString():!1,ie=v=>v?v.toDateString()===a.toDateString():!1,Ie=v=>{if(!v)return!1;const I=v.getDay();if(I===0||I===6)return!1;if(!c)return!0;const F=u.find(oe=>oe.id===c),G=F==null?void 0:F.teaching_schedule;if(!G)return!0;const W=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][v.getDay()],se=I===0?6:I-1;return Array.isArray(G)?G.length===0?!0:G.some(oe=>oe.day===W||oe.day===W.toLowerCase()||oe.day===String(se)||parseInt(oe.day,10)===se):typeof G=="object"?Object.keys(G).length===0?!0:!!(G[W]||G[W.toLowerCase()]||G[String(se)]):!0},Te=(v,I)=>{b(F=>({...F,[A(v)]:I})),I==="Absent"&&D(F=>{const G={...F};return L.forEach(Q=>{const W=`${v}-${Q.category}`;delete G[W]}),G})},fe=v=>{const I={};(q||[]).forEach(F=>{I[A(F.id)]=v}),b(F=>({...F,...I})),z((n("allStudentsMarked")||"All students marked")+`: ${v}`,"success")},Xe=(v,I,F)=>{const G=`${v}-${I}`,Q=typeof F=="string"?parseFloat(F):F;D(W=>({...W,[G]:Q}))},ft=async()=>{if(!c){z(n("selectCourse")||"Select course","error");return}y(!0);try{const v=$(a),I=Object.entries(p).map(([G,Q])=>{const[W]=G.split("-");return fetch(`${ye}/attendance/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:parseInt(W,10),course_id:c,date:v,status:Q,notes:""})})}),F=Object.entries(j).map(([G,Q])=>{const[W,se]=G.split("-");return fetch(`${ye}/daily-performance/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student_id:parseInt(W,10),course_id:c,date:v,category:se,score:Q,max_score:10,notes:""})})});await Promise.all([...I,...F]),b({}),D({}),z(n("savedSuccessfully")||"Saved successfully","success")}catch{z(n("saveFailed")||"Save failed","error")}finally{y(!1)}};return e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:`fixed top-4 right-4 ${R.type==="success"?"bg-green-500":"bg-red-500"} text-white px-4 py-2 rounded shadow`,children:R.message}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-3 rounded-xl",children:e.jsx(ze,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n("enhancedAttendanceTitle")||"Attendance & Daily Performance"}),e.jsx("p",{className:"text-gray-600",children:n("trackAttendanceDaily")||"Track attendance and rate daily performance"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:O,"aria-label":n("previousMonth")||"Previous month",title:n("previousMonth")||"Previous month",className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Hn,{size:20})}),e.jsx("h3",{className:"text-lg font-semibold",children:Z}),e.jsx("button",{onClick:J,"aria-label":n("nextMonth")||"Next month",title:n("nextMonth")||"Next month",className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Ws,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:w.map((v,I)=>e.jsx("div",{className:"text-center text-xs font-semibold py-1 text-gray-600",children:v},I))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:X.map((v,I)=>{if(!v)return e.jsx("div",{className:"aspect-square"},I);const F=Ie(v),G=ee(v),Q=ie(v);return e.jsx("button",{type:"button",onClick:()=>F&&l(v),disabled:!F,className:`aspect-square p-2 rounded text-center transition ${F?"":"bg-gray-100 text-gray-400 cursor-not-allowed opacity-50"} ${F&&G?"ring-2 ring-indigo-500":""} ${F&&Q?"bg-gradient-to-br from-indigo-600 to-purple-600 text-white font-bold shadow":""} ${F&&!Q?"bg-gray-50 hover:bg-indigo-100 text-gray-700":""}`,children:v.getDate()},I)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:n("course")||"Course"}),e.jsxs("select",{"aria-label":n("course")||"Course",title:n("course")||"Course",value:c||"",onChange:v=>h(v.target.value?parseInt(v.target.value,10):""),className:"w-full px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:n("selectCourse")||"Select course"}),u.filter(v=>_.has(v.id)).map(v=>e.jsxs("option",{value:v.id,children:[v.course_code," - ",v.course_name]},v.id))]})]}),L.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-2xl shadow p-6 border border-purple-200",children:[e.jsx("h4",{className:"text-md font-bold text-gray-800 mb-2",children:n("dailyPerformance")||"Daily Performance"}),e.jsx("div",{className:"space-y-2",children:L.map((v,I)=>e.jsxs("div",{className:"bg-white rounded p-3 text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:v.category}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n("weight")||"Weight",": ",v.weight,"%"]})]},I))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl shadow p-6 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($e,{size:20,className:"text-indigo-600"}),e.jsx("h4",{className:"font-semibold",children:n("quickActions")||"Quick Actions"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>fe("Present"),className:"px-3 py-2 rounded bg-green-500 text-white flex items-center gap-2",children:[e.jsx(Ne,{size:16})," ",n("present")||"Present"]}),e.jsxs("button",{onClick:()=>fe("Absent"),className:"px-3 py-2 rounded bg-red-500 text-white flex items-center gap-2",children:[e.jsx(He,{size:16})," ",n("absent")||"Absent"]}),e.jsxs("button",{onClick:()=>fe("Late"),className:"px-3 py-2 rounded bg-yellow-500 text-white flex items-center gap-2",children:[e.jsx(ct,{size:16})," ",n("late")||"Late"]}),e.jsxs("button",{onClick:()=>fe("Excused"),className:"px-3 py-2 rounded bg-blue-500 text-white flex items-center gap-2",children:[e.jsx(je,{size:16})," ",n("excused")||"Excused"]}),e.jsx("button",{onClick:()=>b({}),className:"px-3 py-2 rounded bg-gray-200 text-gray-800",children:n("clear")||"Clear"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold",children:[n("markAttendanceFor")||"Mark attendance for"," — ",a.toLocaleDateString(r==="el"?"el-GR":"en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("button",{onClick:ft,disabled:S||!Object.keys(p).length&&!Object.keys(j).length,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Vs,{size:16})," ",S?n("saving")||"Saving...":n("saveAll")||"Save All"]})]}),e.jsxs("div",{className:"space-y-3",children:[(q&&q.length>0?q:[]).map(v=>{const I=A(v.id),F=p[I];return e.jsx("div",{className:"bg-gray-50 rounded border p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full text-white flex items-center justify-center font-bold",children:[String(v.first_name||"").charAt(0),String(v.last_name||"").charAt(0)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[v.first_name," ",v.last_name]}),e.jsx("div",{className:"text-xs text-gray-500",children:v.student_id})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Te(v.id,"Present"),"aria-label":`${n("present")||"Present"} - ${v.first_name} ${v.last_name}`,title:n("present")||"Present",className:`px-3 py-1 rounded text-sm ${F==="Present"?"bg-green-500 text-white":"bg-green-50 text-green-700"}`,children:e.jsx(Ne,{size:14})}),e.jsx("button",{onClick:()=>Te(v.id,"Absent"),"aria-label":`${n("absent")||"Absent"} - ${v.first_name} ${v.last_name}`,title:n("absent")||"Absent",className:`px-3 py-1 rounded text-sm ${F==="Absent"?"bg-red-500 text-white":"bg-red-50 text-red-700"}`,children:e.jsx(He,{size:14})}),e.jsx("button",{onClick:()=>Te(v.id,"Late"),"aria-label":`${n("late")||"Late"} - ${v.first_name} ${v.last_name}`,title:n("late")||"Late",className:`px-3 py-1 rounded text-sm ${F==="Late"?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-700"}`,children:e.jsx(ct,{size:14})}),e.jsx("button",{onClick:()=>Te(v.id,"Excused"),"aria-label":`${n("excused")||"Excused"} - ${v.first_name} ${v.last_name}`,title:n("excused")||"Excused",className:`px-3 py-1 rounded text-sm ${F==="Excused"?"bg-blue-500 text-white":"bg-blue-50 text-blue-700"}`,children:e.jsx(je,{size:14})}),L.length>0&&e.jsxs("button",{onClick:()=>{E(v),C(!0)},disabled:F==="Absent",className:`ml-2 px-3 py-1 rounded text-sm flex items-center gap-1 ${F==="Absent"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[e.jsx(Fe,{size:14})," ",n("rate")||"Rate"]})]})]})},v.id)}),c&&q.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:n("noStudentsEnrolled")||"No students enrolled for this course"})]})]}),H&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-xl font-bold",children:[n("dailyPerformance")||"Daily Performance"," — ",P.first_name," ",P.last_name]}),e.jsx("button",{onClick:()=>C(!1),"aria-label":n("close")||"Close",title:n("close")||"Close",className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(He,{size:20})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[n("rateStudentPerformanceFor")||"Rate for"," ",a.toLocaleDateString(r==="el"?"el-GR":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(()=>{const I=p[A(P.id)]==="Absent";return e.jsxs(e.Fragment,{children:[I&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 font-semibold",children:n("studentMarkedAbsent")||"Student is marked as Absent. Performance rating is disabled."})}),e.jsx("div",{className:"space-y-4",children:L.map((F,G)=>{const Q=`${P.id}-${F.category}`,W=j[Q]||0;return e.jsxs("div",{className:`rounded p-4 border ${I?"bg-gray-100 border-gray-300 opacity-60":"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:F.category}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n("weightInFinalGrade")||"Weight in final grade",": ",F.weight,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-2xl font-bold ${I?"text-gray-400":"text-indigo-600"}`,children:W}),e.jsx("div",{className:"text-[11px] text-gray-600",children:n("outOf10")||"out of 10"})]})]}),e.jsx("input",{type:"range",min:0,max:10,step:.5,value:W,onChange:se=>Xe(P.id,F.category,se.target.value),disabled:I,"aria-label":`${n("dailyPerformance")||"Daily Performance"}: ${F.category}`,title:`${n("dailyPerformance")||"Daily Performance"}: ${F.category}`,className:`w-full ${I?"cursor-not-allowed":""}`}),e.jsxs("div",{className:"flex justify-between text-[11px] text-gray-600",children:[e.jsxs("span",{children:[n("poor")||"Poor"," (0)"]}),e.jsxs("span",{children:[n("average")||"Average"," (5)"]}),e.jsxs("span",{children:[n("excellent")||"Excellent"," (10)"]})]})]},G)})})]})})(),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>C(!1),className:"flex-1 border px-3 py-2 rounded",children:n("close")||"Close"}),e.jsx("button",{onClick:()=>{C(!1),z(n("performanceScoresRecorded")||"Scores recorded","success")},className:"flex-1 bg-indigo-600 text-white px-3 py-2 rounded",children:n("done")||"Done"})]})]})})]})},Ct="http://localhost:8000/api/v1",da=({students:t,courses:s})=>{const{t:n}=ae(),[r,a]=d.useState(""),[l,o]=d.useState(""),[i,c]=d.useState("Midterm"),[h,u]=d.useState(""),[N,_]=d.useState(""),[m,p]=d.useState(""),[b,j]=d.useState(""),[D,L]=d.useState(null),[M,q]=d.useState([]),[K,S]=d.useState(t||[]),[y,R]=d.useState(s||[]),[k,H]=d.useState(!1),[C,P]=d.useState(null),E=async()=>{if(L(null),P(null),!(!r||!l))try{const g=await fetch(`${Ct}/analytics/student/${r}/course/${l}/final-grade`);if(!g.ok){const J=await g.text().catch(()=>"");throw new Error(J||"Failed to load final grade")}const O=await g.json();L(O)}catch(g){P(g.message||"Failed to load final grade")}};d.useEffect(()=>{S(t||[])},[t]),d.useEffect(()=>{R(s||[])},[s]),d.useEffect(()=>{(async()=>{if(!l){S(t||[]);return}try{const O=await fetch(`${Ct}/enrollments/course/${l}/students`);if(O.ok){const J=await O.json(),U=new Set((J||[]).map(Z=>Z.id)),X=(t||[]).filter(Z=>U.has(Z.id));S(X),r&&!U.has(r)&&a("");return}}catch{}S(t||[])})()},[l]),d.useEffect(()=>{(async()=>{if(!r){R(s||[]);return}try{const O=await Promise.all((s||[]).map(async X=>{try{const Z=await fetch(`${Ct}/enrollments/course/${X.id}/students`);if(!Z.ok)return{id:X.id,has:!1};const ee=await Z.json(),ie=Array.isArray(ee)?ee.some(Ie=>Ie.id===r):!1;return{id:X.id,has:ie}}catch{return{id:X.id,has:!1}}})),J=new Set(O.filter(X=>X.has).map(X=>X.id)),U=(s||[]).filter(X=>J.has(X.id));R(U),l&&!J.has(l)&&o("")}catch{R(s||[])}})()},[r]),d.useEffect(()=>{E()},[r,l]),d.useEffect(()=>{(async()=>{if(q([]),!!r)try{const O=await re.get("/grades/",{params:{student_id:r,course_id:l||void 0}});q(Array.isArray(O.data)?O.data:[])}catch{}})()},[r,l]);const w=d.useMemo(()=>s.find(g=>g.id===l),[s,l]),z=d.useMemo(()=>Array.isArray(w==null?void 0:w.evaluation_rules)?w.evaluation_rules:[],[w]),$=d.useMemo(()=>{const g=[{value:"Midterm",label:n("midterm")},{value:"Final Exam",label:n("finalExam")},{value:"Assignment",label:n("assignment")},{value:"Quiz",label:n("quiz")},{value:"Project",label:n("project")},{value:"Lab",label:n("lab")}],J=(z||[]).map(U=>U==null?void 0:U.category).filter(Boolean).filter(U=>!g.some(X=>X.value===U)).map(U=>({value:U,label:U}));return[...g,...J]},[z,n]);d.useEffect(()=>{(i==="Midterm"||i==="Final Exam")&&p(1)},[i]);const A=async g=>{var U,X,Z;if(g.preventDefault(),!r||!l){P(n("selectStudentAndCourseError"));return}if(!b||String(b).trim().length===0){P(n("assignmentNameRequired"));return}if(h===""||N===""){P(n("fillRequiredFields"));return}const O=Number(h),J=Number(N||100);if(!Number.isFinite(O)||!Number.isFinite(J)||J<=0){P(n("invalidScoreMaxValues"));return}if(O<0||O>J){P(n("scoreMustBeBetween0AndMax"));return}H(!0),P(null);try{const ee={student_id:Number(r),course_id:Number(l),grade:O,max_grade:J,weight:Number(i==="Midterm"||i==="Final Exam"?1:m||1),date_submitted:new Date().toISOString().split("T")[0]};b&&(ee.assignment_name=b),i&&(ee.category=i),await gt.create(ee),await E();try{const ie=await re.get("/grades/",{params:{student_id:r,course_id:l||void 0}});q(Array.isArray(ie.data)?ie.data:[])}catch{}j(""),c("Midterm"),u(""),_(""),p("")}catch(ee){const ie=((X=(U=ee==null?void 0:ee.response)==null?void 0:U.data)==null?void 0:X.detail)||((Z=ee==null?void 0:ee.response)==null?void 0:Z.data)||(ee==null?void 0:ee.message)||"Error";P(typeof ie=="string"?ie:JSON.stringify(ie))}finally{H(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("select",{className:"border rounded px-3 py-2",value:r,onChange:g=>a(g.target.value?Number(g.target.value):""),children:[e.jsx("option",{value:"",children:n("selectStudent")}),K.map(g=>e.jsxs("option",{value:g.id,children:[g.student_id," - ",g.first_name," ",g.last_name]},g.id))]}),e.jsxs("select",{className:"border rounded px-3 py-2",value:l,onChange:g=>o(g.target.value?Number(g.target.value):""),children:[e.jsx("option",{value:"",children:n("selectCourse")}),y.map(g=>e.jsxs("option",{value:g.id,children:[g.course_code," - ",g.course_name]},g.id))]}),e.jsx("button",{className:"border rounded px-3 py-2",onClick:E,children:n("refreshFinal")})]}),e.jsxs("form",{onSubmit:A,className:"bg-white border rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n("addGrade")}),C&&e.jsx("p",{className:"text-sm text-red-600",children:C}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{className:"border rounded px-3 py-2",placeholder:n("assignmentNamePlaceholder"),value:b,onChange:g=>j(g.target.value)}),e.jsx("select",{className:"border rounded px-3 py-2",value:i,onChange:g=>c(g.target.value),children:$.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))}),e.jsx("input",{className:"border rounded px-3 py-2 disabled:bg-gray-50 disabled:text-gray-400",placeholder:n("weightPlaceholder"),value:String(m),onChange:g=>p(g.target.value?Number(g.target.value):""),disabled:i==="Midterm"||i==="Final Exam"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{className:"border rounded px-3 py-2",placeholder:n("gradePlaceholder"),value:String(h),onChange:g=>u(g.target.value?Number(g.target.value):"")}),e.jsx("input",{className:"border rounded px-3 py-2",placeholder:n("maxGradePlaceholder"),value:String(N),onChange:g=>_(g.target.value?Number(g.target.value):"")}),e.jsx("button",{disabled:k,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 disabled:opacity-50",type:"submit",children:n(k?"saving":"saveGrade")})]})]}),e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("finalGradeSummary")}),!r||!l?e.jsx("p",{className:"text-sm text-gray-500",children:n("selectStudentAndCourse")}):D?e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",children:[n("final"),":"]})," ",D.final_grade??"-","%"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",children:[n("gpa"),":"]})," ",D.gpa??"-"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",children:[n("letterGrade"),":"]})," ",D.letter_grade??"-"]}),typeof D.gpa=="number"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`mt-1 ${Xs(lt(D.gpa))}`,children:[e.jsxs("span",{className:"font-semibold",children:[n("greek"),":"]})," ",lt(D.gpa).toFixed(1),"/20 • ",Ys(lt(D.gpa))]}),e.jsxs("p",{className:"text-gray-600",children:[dt(D.gpa).toFixed(1),"%"]})]}),D.category_breakdown&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-semibold",children:n("categoryBreakdown")}),e.jsx("ul",{className:"list-disc ml-5",children:Object.keys(D.category_breakdown).map(g=>e.jsxs("li",{children:[g,": ",D.category_breakdown[g].average.toFixed(1),"% (w ",D.category_breakdown[g].weight,"%)"]},g))})]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:n("noData")})]}),w&&z.length>0&&e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("evaluationStructure")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:z.map((g,O)=>e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:g.category}),e.jsxs("div",{className:"text-sm text-gray-600",children:[g.weight,"%"]}),g.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g.description})]},O))})]}),r&&l&&e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:n("gradeHistory")}),M.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:n("noGradesRecorded")}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:n("assignment")}),z.length>0&&e.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:n("category")}),e.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-700",children:n("score")}),e.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-700",children:"%"}),e.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-700",children:n("weight")}),e.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-700",children:n("letterGrade")}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:n("date")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.map(g=>{const O=Number(g.grade)/Number(g.max_grade||100)*100,J=Dt(O),U=O>=90?"text-green-600":O>=80?"text-blue-600":O>=70?"text-yellow-600":O>=60?"text-orange-600":"text-red-600";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("div",{className:"font-medium text-gray-800",children:g.assignment_name||"-"}),g.notes&&e.jsx("div",{className:"text-xs text-gray-500",children:g.notes})]}),z.length>0&&e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:g.category||"—"})}),e.jsxs("td",{className:"px-4 py-2 text-center",children:[g.grade," / ",g.max_grade||100]}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsxs("span",{className:`font-semibold ${U}`,children:[O.toFixed(1),"%"]})}),e.jsxs("td",{className:"px-4 py-2 text-center",children:["×",g.weight||1]}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${U}`,children:J})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:g.date_submitted||"N/A"})]},g.id)})})]})})]})]})},At="http://localhost:8000/api/v1",ua=()=>{const{t}=ae(),[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState({}),[i,c]=d.useState(null);d.useEffect(()=>{h()},[]);const h=async()=>{try{const[m,p]=await Promise.all([fetch(`${At}/students/`),fetch(`${At}/courses/`)]),b=await m.json(),j=await p.json();n(Array.isArray(b)?b:[]),a(Array.isArray(j)?j:[])}catch(m){console.error("Failed to load data:",m),u(t("failedToLoadData"),"error"),n([]),a([])}},u=(m,p="info")=>{c({message:m,type:p}),setTimeout(()=>c(null),3e3)},N=async(m,p,b)=>{o(j=>({...j,[b]:!0}));try{const j=await fetch(`${At}${m}`);if(!j.ok)throw new Error("Export failed");const D=await j.blob(),L=window.URL.createObjectURL(D),M=document.createElement("a");M.href=L,M.download=p,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(L),document.body.removeChild(M),u(t("downloading"),"success")}catch{u(t("failedToLoadData"),"error")}finally{o(j=>({...j,[b]:!1}))}},_=[{id:"students-excel",title:t("studentsListExcel"),description:t("exportAllStudents"),icon:$e,color:"from-green-500 to-green-600",endpoint:"/export/students/excel",filename:"students.xlsx",format:"Excel"},{id:"students-pdf",title:t("studentsDirectoryPDF"),description:t("exportStudentDirectory"),icon:$e,color:"from-red-500 to-red-600",endpoint:"/export/students/pdf",filename:"students.pdf",format:"PDF"},{id:"courses-excel",title:t("coursesListExcel"),description:t("exportAllCourses"),icon:Ce,color:"from-purple-500 to-purple-600",endpoint:"/export/courses/excel",filename:"courses.xlsx",format:"Excel"},{id:"courses-pdf",title:t("coursesCatalogPDF"),description:t("exportCourseCatalog"),icon:Ce,color:"from-indigo-500 to-indigo-600",endpoint:"/export/courses/pdf",filename:"courses.pdf",format:"PDF"},{id:"attendance-excel",title:t("attendanceRecordsExcel"),description:t("exportAllAttendance"),icon:ze,color:"from-blue-500 to-blue-600",endpoint:"/export/attendance/excel",filename:"attendance.xlsx",format:"Excel"},{id:"all-grades-excel",title:t("allGradesExcel"),description:t("exportAllGrades"),icon:Fe,color:"from-emerald-500 to-emerald-600",endpoint:"/export/grades/excel",filename:"all_grades.xlsx",format:"Excel"},{id:"enrollments-excel",title:t("enrollmentsExcel"),description:t("exportEnrollments"),icon:Bn,color:"from-cyan-500 to-cyan-600",endpoint:"/export/enrollments/excel",filename:"enrollments.xlsx",format:"Excel"},{id:"performance-excel",title:t("dailyPerformanceExcel"),description:t("exportDailyPerformance"),icon:Oe,color:"from-amber-500 to-amber-600",endpoint:"/export/performance/excel",filename:"daily_performance.xlsx",format:"Excel"},{id:"highlights-excel",title:t("highlightsExcel"),description:t("exportHighlights"),icon:Oe,color:"from-pink-500 to-pink-600",endpoint:"/export/highlights/excel",filename:"highlights.xlsx",format:"Excel"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-8",children:[i&&e.jsx("div",{className:`fixed top-4 right-4 ${i.type==="success"?"bg-green-500":"bg-red-500"} text-white px-6 py-3 rounded-lg shadow-lg z-50`,children:i.message}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-3 rounded-xl",children:e.jsx($t,{className:"text-white",size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t("exportCenter")}),e.jsx("p",{className:"text-gray-600",children:t("downloadYourData")})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:_.map(m=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:`bg-gradient-to-br ${m.color} p-4 rounded-xl w-fit mb-4`,children:e.jsx(m.icon,{className:"text-white",size:32})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:m.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:m.description}),e.jsx("button",{onClick:()=>N(m.endpoint,m.filename,m.id),disabled:l[m.id],className:`w-full bg-gradient-to-r ${m.color} text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center space-x-2`,children:l[m.id]?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:t("exporting")})]}):e.jsxs(e.Fragment,{children:[e.jsx($t,{size:20}),e.jsx("span",{children:t("exportTo"+m.format)})]})})]},m.id))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(Gn,{size:24,className:"text-indigo-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t("individualStudentReports")})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:t("generateComprehensive")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:[m.first_name[0],m.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:m.student_id})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(`/export/grades/excel/${m.id}`,`grades_${m.student_id}.xlsx`,`grades-${m.id}`),disabled:l[`grades-${m.id}`],className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors disabled:opacity-50",title:t("exportGrades")+" (Excel)",children:e.jsx(Wn,{size:20})}),e.jsx("button",{onClick:()=>N(`/export/student-report/pdf/${m.id}`,`report_${m.student_id}.pdf`,`report-${m.id}`),disabled:l[`report-${m.id}`],className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",title:t("exportReport")+" (PDF)",children:e.jsx(ds,{size:20})})]})]})},m.id))})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(Fe,{size:24,className:"text-indigo-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t("courseAnalyticsReports")})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:t("generateCourseAnalytics")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white font-bold",children:m.course_code?m.course_code.substring(0,2).toUpperCase():"CO"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[m.course_code," - ",m.course_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[m.semester||"N/A"," | ",m.credits||0," Credits"]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>N(`/export/analytics/course/${m.id}/pdf`,`course_analytics_${m.course_code}.pdf`,`course-analytics-${m.id}`),disabled:l[`course-analytics-${m.id}`],className:"p-2 text-indigo-600 hover:bg-indigo-100 rounded-lg transition-colors disabled:opacity-50",title:t("exportCourseAnalytics")+" (PDF)",children:e.jsx(ds,{size:20})})})]})},m.id))})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-indigo-100 to-purple-100 rounded-2xl p-6 border border-indigo-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:["📊 ",t("exportTips")]}),e.jsxs("ul",{className:"space-y-2 text-gray-700",children:[e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-indigo-600 font-bold",children:"•"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:t("exportTipExcel")}})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-indigo-600 font-bold",children:"•"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:t("exportTipPDF")}})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-indigo-600 font-bold",children:"•"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:t("exportTipStudentReports")}})]}),e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-indigo-600 font-bold",children:"•"}),e.jsx("span",{children:t("exportTipTimestamp")})]})]})]})]})]})},xa=()=>{const{t}=ae(),[s,n]=d.useState("getting-started"),[r,a]=d.useState(""),l=c=>{n(s===c?null:c)},i=[{id:"getting-started",title:t("helpGettingStarted"),icon:Ce,color:"text-green-600",items:[{question:t("helpHowToAddStudent"),answer:t("helpAddStudentAnswer")},{question:t("helpHowToNavigate"),answer:t("helpNavigateAnswer")},{question:t("helpWhatDoINeed"),answer:t("helpWhatNeedAnswer")}]},{id:"students",title:t("helpStudentManagement"),icon:tt,color:"text-blue-600",items:[{question:t("helpHowToEditStudent"),answer:t("helpEditStudentAnswer")},{question:t("helpHowToDeleteStudent"),answer:t("helpDeleteStudentAnswer")},{question:t("helpHowToSearchStudent"),answer:t("helpSearchStudentAnswer")}]},{id:"courses",title:t("helpCourseEvaluation"),icon:Ce,color:"text-indigo-600",items:[{question:t("helpWhatAreEvaluationRules"),answer:t("helpEvaluationRulesAnswer")},{question:t("helpHowToSetEvaluationRules"),answer:t("helpSetEvaluationRulesAnswer")},{question:t("helpCanIChangeRules"),answer:t("helpChangeRulesAnswer")}]},{id:"attendance",title:t("helpAttendanceTracking"),icon:St,color:"text-purple-600",items:[{question:t("helpHowToRecordAttendance"),answer:t("helpRecordAttendanceAnswer")},{question:t("helpWhatDoAttendanceStatusesMean"),answer:t("helpAttendanceStatusAnswer")},{question:t("helpWhatIsAbsencePenalty"),answer:t("helpAbsencePenaltyAnswer")}]},{id:"daily-performance",title:t("helpDailyPerformance"),icon:tt,color:"text-orange-600",items:[{question:t("helpWhatIsDailyPerformance"),answer:t("helpDailyPerformanceAnswer")},{question:t("helpHowToRateDailyPerformance"),answer:t("helpRateDailyPerformanceAnswer")},{question:t("helpWhatIsPerformanceMultiplier"),answer:t("helpPerformanceMultiplierAnswer")}]},{id:"grades",title:t("helpGradeManagement"),icon:Ce,color:"text-yellow-600",items:[{question:t("helpHowToAddGrades"),answer:t("helpAddGradesAnswer")},{question:t("helpHowDoesWeightWork"),answer:t("helpWeightAnswer")},{question:t("helpHowIsGPACalculated"),answer:t("helpGPACalculationAnswer")}]},{id:"performance",title:t("helpPerformanceAnalytics"),icon:wt,color:"text-cyan-600",items:[{question:t("helpWhatIsGradeBreakdown"),answer:t("helpGradeBreakdownAnswer")},{question:t("helpHowToViewBreakdown"),answer:t("helpViewBreakdownAnswer")},{question:t("helpWhatIsGreekGrade"),answer:t("helpGreekGradeAnswer")}]},{id:"calendar",title:t("helpCalendarSchedule"),icon:St,color:"text-teal-600",items:[{question:t("helpHowToExportSchedule"),answer:t("helpExportScheduleAnswer")},{question:t("helpWhatIsICSFile"),answer:t("helpICSFileAnswer")},{question:t("helpScheduleNotShowing"),answer:t("helpScheduleNotShowingAnswer")}]},{id:"export",title:t("helpDataExport"),icon:wt,color:"text-red-600",items:[{question:t("helpWhatExportFormats"),answer:t("helpExportFormatsAnswer")},{question:t("helpHowToExportStudentData"),answer:t("helpExportStudentDataAnswer")}]},{id:"localization",title:t("helpLanguageLocalization"),icon:tt,color:"text-pink-600",items:[{question:t("helpHowToChangeLanguage"),answer:t("helpChangeLanguageAnswer")},{question:t("helpWhatIsLocalized"),answer:t("helpLocalizedAnswer")}]},{id:"system",title:t("helpSystemManagement"),icon:Ce,color:"text-gray-600",items:[{question:t("helpHowToBackup"),answer:t("helpBackupAnswer")},{question:t("helpHowToRestore"),answer:t("helpRestoreAnswer")},{question:t("helpWhatIsSampleData"),answer:t("helpSampleDataAnswer")},{question:t("helpSystemHealth"),answer:t("helpSystemHealthAnswer")}]}].map(c=>({...c,items:c.items.filter(h=>h.question.toLowerCase().includes(r.toLowerCase())||h.answer.toLowerCase().includes(r.toLowerCase()))})).filter(c=>c.items.length>0);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center space-x-3",children:[e.jsx(wt,{className:"text-indigo-600",size:28}),e.jsx("span",{children:t("helpTitle")})]})}),e.jsx("p",{className:"text-gray-600",children:t("everythingYouNeed")}),e.jsxs("div",{className:"relative",children:[e.jsx(Xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:t("searchDocumentation"),value:r,onChange:c=>a(c.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:t("noResults")}):i.map(c=>e.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>l(c.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(c.icon,{className:c.color,size:24}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:c.title}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",c.items.length," ",t("topics"),")"]})]}),s===c.id?e.jsx(qn,{className:"text-gray-400",size:20}):e.jsx(Ws,{className:"text-gray-400",size:20})]}),s===c.id&&e.jsx("div",{className:"px-6 pb-4 space-y-4",children:c.items.map((h,u)=>e.jsxs("div",{className:"border-l-4 border-indigo-200 pl-4 py-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:h.question}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:h.answer})]},u))})]},c.id))}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:t("stillNeedHelp")}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("additionalResources")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx(Ce,{className:"text-indigo-600 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:t("userGuide")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("comprehensivePDF")})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx(St,{className:"text-purple-600 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:t("videoTutorials")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("stepByStep")})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx(tt,{className:"text-green-600 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:t("contactSupport")}),e.jsx("p",{className:"text-sm text-gray-600",children:t("personalizedAssistance")})]})]})]})]})},ke="http://localhost:8000/api/v1",ha=()=>{var z,$;const{t}=ae(),[s,n]=d.useState(null),[r,a]=d.useState(!1),[l,o]=d.useState(null),[i,c]=d.useState(!1),[h,u]=d.useState("all"),[N,_]=d.useState(null),[m,p]=d.useState("courses"),[b,j]=d.useState(null),[D,L]=d.useState(null),[M,q]=d.useState(!1),[K,S]=d.useState(5e3),[y,R]=d.useState(null),k=(()=>{try{return ke.endsWith("/api/v1")?ke.replace(/\/api\/v1$/,"")+"/health":ke+"/health"}catch{return"http://localhost:8000/health"}})(),H=async()=>{a(!0);try{const g=await(await fetch(k)).json();n(g),R(new Date().toLocaleTimeString())}catch{n({status:"error"})}finally{a(!1)}};fs.useEffect(()=>{if(!M)return;const A=setInterval(()=>{r||H()},Math.max(2e3,K));return()=>clearInterval(A)},[M,K,k,r]);const C=async()=>{o("backup"),_(null);try{const g=await(await fetch(`${ke}/adminops/backup`,{method:"POST"})).json();_({op:"backup",data:g})}catch{_({op:"backup",error:!0})}finally{o(null)}},P=async()=>{if(!D){_({op:"restore",error:"No file selected"});return}o("restore"),_(null);try{const A=new FormData;A.append("file",D);const O=await(await fetch(`${ke}/adminops/restore`,{method:"POST",body:A})).json();_({op:"restore",data:O})}catch{_({op:"restore",error:!0})}finally{o(null)}},E=async()=>{if(!i){_({op:"clear",error:"Confirm required"});return}o("clear"),_(null);try{const g=await(await fetch(`${ke}/adminops/clear`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0,scope:h})})).json();_({op:"clear",data:g})}catch{_({op:"clear",error:!0})}finally{o(null)}},w=async()=>{if(!b||b.length===0){_({op:"upload",error:"No files selected"});return}o("upload"),_(null);try{const A=new FormData;A.append("import_type",m),Array.from(b).forEach(J=>A.append("files",J));const O=await(await fetch(`${ke}/imports/upload`,{method:"POST",body:A})).json();_({op:"upload",data:O})}catch{_({op:"upload",error:!0})}finally{o(null)}};return e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 text-white "+(s.status==="healthy"?"bg-emerald-600":s.status==="degraded"?"bg-amber-600":"bg-rose-600"),children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"System Health"}),e.jsxs("div",{className:"text-xs opacity-90 space-x-2",children:[s.version?e.jsxs("span",{children:["v",s.version]}):null,s.timestamp?e.jsx("span",{children:new Date(s.timestamp).toLocaleString()}):null,y?e.jsxs("span",{children:["(checked ",y,")"]}):null]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-emerald-300 shadow-[0_0_6px_rgba(16,185,129,0.9)]"}),e.jsx("span",{className:"text-white/90 text-xs",children:"Frontend"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full "+((s==null?void 0:s.status)==="healthy"?"bg-emerald-300 shadow-[0_0_6px_rgba(16,185,129,0.9)]":(s==null?void 0:s.status)==="degraded"?"bg-amber-300 shadow-[0_0_6px_rgba(245,158,11,0.9)]":"bg-rose-300 shadow-[0_0_6px_rgba(244,63,94,0.9)]")}),e.jsx("span",{className:"text-white/90 text-xs",children:"Backend"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[e.jsx("button",{onClick:H,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white rounded text-xs",children:t(r?"loading":"utils.checkHealth")}),e.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-white/90",children:[e.jsx("input",{type:"checkbox",checked:M,onChange:A=>q(A.target.checked),"aria-label":"Toggle auto refresh"}),"Auto-refresh"]}),e.jsxs("select",{value:String(K),onChange:A=>S(parseInt(A.target.value,10)),className:"bg-white/20 text-white rounded px-2 py-1 text-xs","aria-label":"Auto refresh interval",disabled:!M,children:[e.jsx("option",{className:"text-black",value:"3000",children:"3s"}),e.jsx("option",{className:"text-black",value:"5000",children:"5s"}),e.jsx("option",{className:"text-black",value:"10000",children:"10s"}),e.jsx("option",{className:"text-black",value:"30000",children:"30s"})]})]})]})]})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-4 bg-white",children:[e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Database"}),e.jsx("div",{className:"text-sm font-semibold",children:s.database||s.db||"unknown"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Students"}),e.jsx("div",{className:"text-sm font-semibold",children:((z=s.statistics)==null?void 0:z.students)??s.students_count??"—"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Courses"}),e.jsx("div",{className:"text-sm font-semibold",children:(($=s.statistics)==null?void 0:$.courses)??s.courses_count??"—"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Frontend"}),e.jsxs("div",{className:"text-sm font-semibold",children:["running on ",window.location.hostname,":",window.location.port||"5173"]})]}),typeof s.uptime<"u"&&e.jsxs("div",{className:"rounded-lg border p-3 md:col-span-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Uptime"}),e.jsxs("div",{className:"text-sm font-semibold",children:[s.uptime,"s"]})]}),e.jsxs("div",{className:"rounded-lg border p-3 md:col-span-3",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Available Endpoints"}),(()=>{var X;const A=String(window.location.port||"5173"),g=Array.isArray((X=s==null?void 0:s.network)==null?void 0:X.ips)?s.network.ips:[],O=[window.location.hostname,"localhost","127.0.0.1"].filter(Boolean),J=new Set;[...g,...O].forEach(Z=>{Z&&typeof Z=="string"&&J.add(Z)});const U=Array.from(J);return U.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:U.map(Z=>e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-mono text-gray-700 mb-1",children:Z}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{className:"text-indigo-600 hover:underline",href:`http://${Z}:8000/`,target:"_blank",rel:"noopener noreferrer",children:"Backend"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`http://${Z}:8000/docs`,target:"_blank",rel:"noopener noreferrer",children:"Docs"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`http://${Z}:8000/redoc`,target:"_blank",rel:"noopener noreferrer",children:"ReDoc"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`http://${Z}:8000/health`,target:"_blank",rel:"noopener noreferrer",children:"Health"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("a",{className:"text-emerald-700 hover:underline",href:`http://${Z}:${A}/`,target:"_blank",rel:"noopener noreferrer",children:"Frontend"})]})]},Z))}):e.jsx("div",{className:"text-xs text-gray-600",children:"No IPs available."})})()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:t("utils.backupDatabase")}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:t("utils.backupDesc")}),e.jsx("button",{onClick:C,disabled:l==="backup",className:"px-3 py-2 bg-indigo-600 text-white rounded disabled:opacity-50",children:l==="backup"?`${t("loading")}...`:t("utils.backupDatabase")})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:t("utils.resetDatabase")}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:t("utils.uploadPreviouslySavedBackup")}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-stretch md:items-center",children:[e.jsx("input",{type:"file",accept:".db",onChange:A=>{var g;return L(((g=A.target.files)==null?void 0:g[0])||null)},className:"flex-1","aria-label":"Select backup database file to restore"}),e.jsx("button",{onClick:P,disabled:!D||l==="restore",className:"px-3 py-2 bg-emerald-600 text-white rounded disabled:opacity-50",children:l==="restore"?`${t("loading")}...`:t("utils.restoreDb")})]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:t("utils.appMayNeedRefresh")})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:t("utils.clear")}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:t("utils.deleteDataChooseScope")}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{id:"confirmClear",type:"checkbox",checked:i,onChange:A=>c(A.target.checked)}),e.jsx("label",{htmlFor:"confirmClear",className:"text-sm",children:t("confirm")})]}),e.jsxs("select",{value:h,onChange:A=>u(A.target.value),className:"w-full border rounded px-2 py-1 mb-2","aria-label":"Select clear database scope",children:[e.jsx("option",{value:"all",children:t("utils.allCoursesStudentsRecords")}),e.jsx("option",{value:"data_only",children:t("utils.dataOnlyKeepCoursesStudents")})]}),e.jsx("button",{onClick:E,disabled:!i||l==="clear",className:"px-3 py-2 bg-red-600 text-white rounded disabled:opacity-50",children:l==="clear"?`${t("loading")}...`:t("utils.clearDb")})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:t("utils.uploadJsonToImport")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[e.jsxs("select",{value:m,onChange:A=>p(A.target.value),className:"border rounded px-2 py-1 w-full md:w-auto","aria-label":"Select import type",children:[e.jsx("option",{value:"courses",children:t("courses")}),e.jsx("option",{value:"students",children:t("students")})]}),e.jsx("input",{type:"file",accept:".json",multiple:!0,onChange:A=>j(A.target.files),className:"w-full md:flex-1","aria-label":"Select JSON files to import"}),e.jsx("button",{onClick:w,disabled:l==="upload",className:"px-3 py-2 bg-purple-600 text-white rounded disabled:opacity-50",children:l==="upload"?`${t("loading")}...`:t("utils.importUpload")})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:t("utils.selectJsonFiles")})]}),N&&e.jsx("pre",{className:"bg-gray-50 border rounded p-3 text-xs overflow-auto",children:JSON.stringify({result:N},null,2)})]})},ma=({students:t})=>{const{t:s}=ae(),[n,r]=d.useState("exports");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("exports"),className:`px-4 py-2 rounded border ${n==="exports"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:s("export")}),e.jsx("button",{onClick:()=>r("help"),className:`px-4 py-2 rounded border ${n==="help"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:s("help")}),e.jsx("button",{onClick:()=>r("devtools"),className:`px-4 py-2 rounded border ${n==="devtools"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:s("utils.title")})]}),e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[n==="exports"&&e.jsx(ua,{}),n==="help"&&e.jsx(xa,{}),n==="devtools"&&e.jsx(ha,{})]})]})},pa="http://localhost:8000/api/v1",ga=({studentId:t,courseId:s,courseName:n,onClose:r})=>{var _;const{t:a}=ae()||{t:m=>m},[l,o]=d.useState(null),[i,c]=d.useState(!0),[h,u]=d.useState(null);d.useEffect(()=>{(async()=>{c(!0),u(null);try{const p=await fetch(`${pa}/analytics/student/${t}/course/${s}/final-grade`);if(!p.ok)throw new Error("Failed to load breakdown");const b=await p.json();o(b)}catch(p){u((p==null?void 0:p.message)||"Failed to load breakdown")}finally{c(!1)}})()},[t,s]);const N=()=>{if(!l)return 0;const m=Number(l.absence_penalty||0),p=Number(l.unexcused_absences||0);return m*p};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Un,{size:20,className:"text-indigo-600"}),a("gradeBreakdown")||"Grade Breakdown",n?` — ${n}`:""]}),e.jsx("button",{onClick:r,"aria-label":a("close")||"Close",title:a("close")||"Close",className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(He,{size:20})})]}),i&&e.jsx("div",{className:"text-center py-8 text-gray-600",children:a("loading")||"Loading..."}),h&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm flex items-center gap-2",children:[e.jsx(je,{size:16})," ",h]}),l&&!h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a("finalGrade")||"Final Grade"}),e.jsxs("div",{className:"text-3xl font-bold text-indigo-700",children:[(_=l.final_grade)!=null&&_.toFixed?l.final_grade.toFixed(2):l.final_grade,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a("gpa")||"GPA"}),e.jsx("div",{className:"text-3xl font-bold text-green-700",children:l.gpa})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a("greekScale")||"Greek Scale"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-700",children:[l.greek_grade?l.greek_grade.toFixed(2):"0.00"," ",a("outOf20")||"/ 20"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 rounded p-4 border border-yellow-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a("letterGrade")||"Letter Grade"}),e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:l.letter_grade})]})]}),Number(l.unexcused_absences||0)>0&&Number(l.absence_penalty||0)>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[e.jsx("div",{className:"text-sm text-gray-800 font-semibold mb-1",children:a("absencePenaltyApplied")||"Absence penalty applied"}),e.jsxs("div",{className:"text-sm text-red-700",children:[a("unexcusedAbsences")||"Unexcused absences",": ",e.jsx("strong",{children:l.unexcused_absences})," × ",a("penaltyPerAbsence")||"Penalty/absence",": ",e.jsxs("strong",{children:[l.absence_penalty,"%"]})," = ",a("totalDeduction")||"Total deduction",": ",e.jsxs("strong",{children:[l.absence_deduction?l.absence_deduction.toFixed(2):N().toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"bg-white rounded border p-4",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-3",children:a("categoryBreakdown")||"Category Breakdown"}),e.jsx("div",{className:"space-y-2",children:Object.entries(l.category_breakdown||{}).map(([m,p])=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:m}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a("average")||"Average",": ",Number(p.average||0).toFixed(2),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[a("weight")||"Weight",": ",Number(p.weight||0),"%"]}),e.jsxs("div",{className:"text-sm font-semibold text-indigo-700",children:[a("contribution")||"Contribution",": ",Number(p.contribution||0).toFixed(2),"%"]})]})]},m))})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx("button",{onClick:r,className:"flex-1 border px-3 py-2 rounded",children:a("close")||"Close"})})]})]})})},gs="http://localhost:8000/api/v1",fa=({studentId:t,onBack:s})=>{var E;const{t:n}=ae()||{t:w=>w},[r,a]=d.useState(null),[l,o]=d.useState([]),[i,c]=d.useState([]),[h,u]=d.useState([]),[N,_]=d.useState(!0),[m,p]=d.useState(null),[b,j]=d.useState([]),[D,L]=d.useState({}),[M,q]=d.useState(!1),[K,S]=d.useState(null);d.useEffect(()=>{t&&y()},[t]);const y=async()=>{_(!0),p(null);try{const[w,z,$]=await Promise.all([Ue.getById(t),gt.getByStudent(t),qs.getByStudent(t)]);a(w),o(Array.isArray(z)?z:[]),c(Array.isArray($)?$:[]);try{const A=await Hs.getByStudent(t);u(Array.isArray(A)?A:[])}catch(A){console.warn("Highlights endpoint not available:",A),u([])}try{const g=await(await fetch(`${gs}/enrollments/student/${t}`)).json(),O=Array.isArray(g)?g:[];j(O);const J=Array.from(new Set(O.map(X=>X.course_id))),U={};await Promise.all(J.map(async X=>{try{const Z=await fetch(`${gs}/courses/${X}`);if(Z.ok){const ee=await Z.json();U[X]=ee}}catch{}})),L(U)}catch{j([]),L({})}}catch(w){console.error("Failed to load student data:",w),p(n("failedToLoadStudentData")),o([]),c([]),u([]),j([]),L({})}finally{_(!1)}},R=()=>{const w=i.length,z=i.filter(J=>J.status==="Present").length,$=w>0?z/w*100:0,A=l.length,g=A>0?l.reduce((J,U)=>J+U.grade/U.max_grade*100,0)/A:0,O=A>0?g/100*4:0;return{attendanceRate:Number($.toFixed(1)),avgGrade:Number(g.toFixed(1)),gpa:Number(O.toFixed(2)),totalClasses:w,totalGrades:A}},k=w=>w>=90?"A":w>=80?"B":w>=70?"C":w>=60?"D":"F",H=()=>{const w={A:0,B:0,C:0,D:0,F:0};return l.forEach(z=>{const $=z.grade/z.max_grade*100,A=k($);w[A]++}),w};if(N)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600"})});if(m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:m}),e.jsx("button",{type:"button",onClick:s,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:n("backToStudents")})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:n("studentNotFound")})});const C=R(),P=H();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{type:"button",onClick:s,className:"mb-6 flex items-center space-x-2 text-gray-600 hover:text-indigo-600 transition-colors",children:[e.jsx(zn,{size:20}),e.jsx("span",{children:n("backToStudents")})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 h-32"}),e.jsxs("div",{className:"px-8 pb-8",children:[e.jsxs("div",{className:"flex items-end space-x-6 -mt-16",children:[e.jsxs("div",{className:"w-32 h-32 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl shadow-xl flex items-center justify-center text-white text-4xl font-bold border-4 border-white",children:[r.first_name[0],r.last_name[0]]}),e.jsxs("div",{className:"pb-4",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[r.first_name," ",r.last_name]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[n("studentID")," ",r.student_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(Jn,{size:20}),e.jsx("span",{children:r.email})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(ze,{size:20}),e.jsxs("span",{children:[n("enrolled")," ",r.enrollment_date]})]}),r.study_year&&e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.jsx(Oe,{size:20,className:"text-indigo-600"}),e.jsxs("span",{className:"font-semibold text-indigo-700",children:[n("year")," ",r.study_year]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:r.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:20,className:"text-green-600"}),e.jsx("span",{className:"text-green-600 font-semibold",children:n("active")})]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{size:20,className:"text-red-600"}),e.jsx("span",{className:"text-red-600 font-semibold",children:n("inactive")})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Fe,{size:24}),e.jsx("span",{className:"text-xs opacity-75",children:n("overall")})]}),e.jsx("p",{className:"text-4xl font-bold",children:C.gpa}),e.jsx("p",{className:"text-sm opacity-90",children:n("gpaOutOf")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Oe,{size:24}),e.jsx("span",{className:"text-xs opacity-75",children:n("average")})]}),e.jsxs("p",{className:"text-4xl font-bold",children:[C.avgGrade,"%"]}),e.jsxs("p",{className:"text-sm opacity-90",children:[C.totalGrades," ",n("assignments")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ne,{size:24}),e.jsx("span",{className:"text-xs opacity-75",children:n("attendance").toUpperCase()})]}),e.jsxs("p",{className:"text-4xl font-bold",children:[C.attendanceRate,"%"]}),e.jsxs("p",{className:"text-sm opacity-90",children:[C.totalClasses," ",n("classes")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ge,{size:24}),e.jsx("span",{className:"text-xs opacity-75",children:n("highlights")})]}),e.jsx("p",{className:"text-4xl font-bold",children:h.length}),e.jsx("p",{className:"text-sm opacity-90",children:n("totalAchievements")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[e.jsx(We,{size:24,className:"text-indigo-600"}),e.jsx("span",{children:n("gradeDistribution")})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(P).map(([w,z])=>{const $=l.length,A=$>0?z/$*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-700",children:["Grade ",w]}),e.jsxs("span",{className:"text-gray-600",children:[z," assignments (",A.toFixed(0),"%)"]})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[A.toFixed(0),"%"]})]},w)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[e.jsx(Ge,{size:24,className:"text-yellow-500"}),e.jsx("span",{children:n("recentHighlights")})]}),h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:n("noHighlights")}):e.jsx("div",{className:"space-y-4",children:h.slice(0,5).map(w=>e.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${w.is_positive?"bg-green-50 border-green-500":"bg-yellow-50 border-yellow-500"}`,children:[w.rating&&e.jsx("div",{className:"flex items-center space-x-1 mb-2",children:[...Array(5)].map((z,$)=>e.jsx(Ge,{size:16,className:$<w.rating?"text-yellow-500 fill-current":"text-gray-300"},$))}),e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:w.category}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.highlight_text}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:w.semester})]},w.id))})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:n("enrolledCourses")||"Enrolled Courses"}),b.length===0?e.jsx("p",{className:"text-gray-500",children:n("noEnrollments")||"No enrollments found."}):e.jsx("div",{className:"space-y-2",children:b.map(w=>{const z=D[w.course_id];return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:z?`${z.course_code} — ${z.course_name}`:`Course #${w.course_id}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n("enrolled"),": ",w.enrolled_at||"-"]})]}),e.jsx("div",{children:e.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm hover:bg-indigo-700",onClick:()=>{S(w.course_id),q(!0)},children:n("viewBreakdown")||"View Breakdown"})})]},w.id)})})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:n("recentGrades")}),l.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:n("noGradesYet")}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:n("assignmentHeader")}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:n("scoreHeader")}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:n("percentageHeader")}),e.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:n("gradeHeader")}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:n("dateHeader")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.slice(0,10).map(w=>{const z=w.grade/w.max_grade*100,$=k(z);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:w.assignment_name}),e.jsxs("td",{className:"px-6 py-4 text-center text-gray-600",children:[w.grade," / ",w.max_grade]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[z.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-indigo-100 text-indigo-800 font-bold",children:$})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w.date_submitted||"N/A"})]},w.id)})})]})})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:n("attendanceOverview")}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Present","Absent","Late","Excused"].map(w=>{const z=i.filter(g=>g.status===w).length,$=i.length>0?(z/i.length*100).toFixed(1):0,A={Present:"from-green-500 to-green-600",Absent:"from-red-500 to-red-600",Late:"from-yellow-500 to-yellow-600",Excused:"from-blue-500 to-blue-600"};return e.jsxs("div",{className:`bg-gradient-to-br ${A[w]} rounded-xl shadow p-4 text-white`,children:[e.jsx("p",{className:"text-sm opacity-90",children:n(w.toLowerCase())}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:z}),e.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[$,"%"]})]},w)})})]}),M&&K&&e.jsx(ga,{studentId:t,courseId:K,courseName:(E=D[K])==null?void 0:E.course_name,onClose:()=>{q(!1),S(null)}})]})})},ya=({onClose:t,onAdd:s})=>{const{t:n}=ae(),[r,a]=d.useState({student_id:"",last_name:"",first_name:"",father_name:"",mobile_phone:"",phone:"",email:"",health_issue:"",note:"",study_year:"",enrollment_date:new Date().toISOString().split("T")[0]}),l=o=>{o.preventDefault(),s(r),t()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:n("addNewStudent")}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:n("studentIdPlaceholder"),value:r.student_id,onChange:o=>a({...r,student_id:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:n("lastNamePlaceholder"),value:r.last_name,onChange:o=>a({...r,last_name:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("input",{type:"text",placeholder:n("firstNamePlaceholder"),value:r.first_name,onChange:o=>a({...r,first_name:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0})]}),e.jsx("input",{type:"text",placeholder:n("fatherNamePlaceholder"),value:r.father_name,onChange:o=>a({...r,father_name:o.target.value}),className:"w-full border px-4 py-2 rounded"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"tel",placeholder:n("mobilePhonePlaceholder"),value:r.mobile_phone,onChange:o=>a({...r,mobile_phone:o.target.value}),className:"w-full border px-4 py-2 rounded"}),e.jsx("input",{type:"tel",placeholder:n("phonePlaceholder"),value:r.phone,onChange:o=>a({...r,phone:o.target.value}),className:"w-full border px-4 py-2 rounded"})]}),e.jsx("input",{type:"email",placeholder:n("emailPlaceholder"),value:r.email,onChange:o=>a({...r,email:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("textarea",{placeholder:n("healthIssuesPlaceholder"),value:r.health_issue,onChange:o=>a({...r,health_issue:o.target.value}),className:"w-full border px-4 py-2 rounded min-h-[90px]"}),e.jsx("textarea",{placeholder:n("notePlaceholder"),value:r.note,onChange:o=>a({...r,note:o.target.value}),className:"w-full border px-4 py-2 rounded min-h-[90px]"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",placeholder:n("studyYearPlaceholder"),value:r.study_year,onChange:o=>a({...r,study_year:o.target.value?parseInt(o.target.value):""}),className:"w-full border px-4 py-2 rounded"}),e.jsx("input",{type:"date",value:r.enrollment_date,onChange:o=>a({...r,enrollment_date:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded",children:n("cancel")}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:n("addStudent")})]})]})]})})},ba=({student:t,onClose:s,onUpdate:n})=>{const{t:r}=ae(),[a,l]=d.useState({...t});d.useEffect(()=>{t&&l({...t})},[t]);const o=i=>{i.preventDefault(),n(a),s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:r("editStudent")}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:r("studentIdPlaceholder"),value:a.student_id||"",onChange:i=>l({...a,student_id:i.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:r("lastNamePlaceholder"),value:a.last_name||"",onChange:i=>l({...a,last_name:i.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("input",{type:"text",placeholder:r("firstNamePlaceholder"),value:a.first_name||"",onChange:i=>l({...a,first_name:i.target.value}),className:"w-full border px-4 py-2 rounded",required:!0})]}),e.jsx("input",{type:"text",placeholder:r("fatherNamePlaceholder"),value:a.father_name||"",onChange:i=>l({...a,father_name:i.target.value}),className:"w-full border px-4 py-2 rounded"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"tel",placeholder:r("mobilePhonePlaceholder"),value:a.mobile_phone||"",onChange:i=>l({...a,mobile_phone:i.target.value}),className:"w-full border px-4 py-2 rounded"}),e.jsx("input",{type:"tel",placeholder:r("phonePlaceholder"),value:a.phone||"",onChange:i=>l({...a,phone:i.target.value}),className:"w-full border px-4 py-2 rounded"})]}),e.jsx("input",{type:"email",placeholder:r("emailPlaceholder"),value:a.email||"",onChange:i=>l({...a,email:i.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("textarea",{placeholder:r("healthIssuesPlaceholder"),value:a.health_issue||"",onChange:i=>l({...a,health_issue:i.target.value}),className:"w-full border px-4 py-2 rounded min-h-[90px]"}),e.jsx("textarea",{placeholder:r("notePlaceholder"),value:a.note||"",onChange:i=>l({...a,note:i.target.value}),className:"w-full border px-4 py-2 rounded min-h-[90px]"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",placeholder:r("studyYearPlaceholder"),value:a.study_year??"",onChange:i=>l({...a,study_year:i.target.value?parseInt(i.target.value):null}),className:"w-full border px-4 py-2 rounded"}),e.jsx("input",{type:"date",value:a.enrollment_date||"",onChange:i=>l({...a,enrollment_date:i.target.value}),className:"w-full border px-4 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded",children:r("cancel")}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:r("save")})]})]})]})})},ja=({onClose:t,onAdd:s})=>{const{t:n}=ae(),[r,a]=d.useState({course_code:"",course_name:"",semester:"",credits:3}),l=o=>{o.preventDefault(),s(r),t()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:n("addNewCourse")}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:n("courseCodePlaceholder"),value:r.course_code,onChange:o=>a({...r,course_code:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("input",{type:"text",placeholder:n("courseNamePlaceholder"),value:r.course_name,onChange:o=>a({...r,course_name:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("input",{type:"text",placeholder:n("semesterPlaceholder"),value:r.semester,onChange:o=>a({...r,semester:o.target.value}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsx("input",{type:"number",placeholder:n("creditsPlaceholder"),value:r.credits,onChange:o=>a({...r,credits:parseInt(o.target.value)}),className:"w-full border px-4 py-2 rounded",required:!0}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded",children:n("cancel")}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded",children:n("addCourse")})]})]})]})})},Na=({course:t,onClose:s,onUpdate:n})=>{const{t:r}=ae(),[a,l]=d.useState({...t});d.useEffect(()=>{t&&l({...t})},[t]);const o=i=>{i.preventDefault();const c={course_code:a.course_code,course_name:a.course_name,semester:a.semester,credits:a.credits,description:a.description,hours_per_week:a.hours_per_week,absence_penalty:a.absence_penalty,...a.evaluation_rules&&{evaluation_rules:a.evaluation_rules},...a.teaching_schedule&&{teaching_schedule:a.teaching_schedule}};n(c),s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full my-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:r("editCourse")}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("courseCode")," *"]}),e.jsx("input",{type:"text",placeholder:r("courseCodePlaceholder"),value:a.course_code||"",onChange:i=>l({...a,course_code:i.target.value}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("credits")," *"]}),e.jsx("input",{type:"number",placeholder:r("creditsPlaceholder"),value:a.credits||3,onChange:i=>l({...a,credits:parseInt(i.target.value)||3}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",min:"1",max:"12",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("courseName")," *"]}),e.jsx("input",{type:"text",placeholder:r("courseNamePlaceholder"),value:a.course_name||"",onChange:i=>l({...a,course_name:i.target.value}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("semester")," *"]}),e.jsx("input",{type:"text",placeholder:r("semesterPlaceholder"),value:a.semester||"",onChange:i=>l({...a,semester:i.target.value}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("description")}),e.jsx("textarea",{placeholder:r("descriptionPlaceholder")||"Course description",value:a.description||"",onChange:i=>l({...a,description:i.target.value}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",rows:"3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("hoursPerWeek")||"Hours per Week"}),e.jsx("input",{type:"number",placeholder:"3.0",value:a.hours_per_week||3,onChange:i=>l({...a,hours_per_week:parseFloat(i.target.value)||3}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",min:"0.5",max:"40",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("absencePenalty")||"Absence Penalty (%)"}),e.jsx("input",{type:"number",placeholder:"0.0",value:a.absence_penalty||0,onChange:i=>l({...a,absence_penalty:parseFloat(i.target.value)||0}),className:"w-full border border-gray-300 px-4 py-2 rounded focus:ring-2 focus:ring-indigo-500",min:"0",max:"100",step:"0.5"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t mt-6",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:r("cancel")}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:r("updateCourse")})]})]})]})})},wa=({message:t,type:s="info",onClose:n})=>{const r={success:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s];return e.jsx("div",{className:`fixed top-4 right-4 p-4 rounded shadow-lg ${r}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:n,className:"ml-4 font-bold",children:"×"})]})})},va=()=>{const{language:t,setLanguage:s}=ae(),n=()=>{s(t==="en"?"el":"en")};return e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md hover:shadow-lg",title:t==="en"?"Switch to Greek / Αλλαγή σε Ελληνικά":"Switch to English / Αλλαγή σε Αγγλικά","aria-label":`Current language: ${t==="en"?"English":"Greek"}. Click to switch.`,children:[e.jsx(Vn,{size:18,className:"text-white"}),e.jsx("span",{className:"font-semibold text-sm",children:t==="en"?"EN":"ΕΛ"}),e.jsx("span",{className:"text-xs opacity-90",children:t==="en"?"→ ΕΛ":"→ EN"})]})},be=("http://localhost:8000/api/v1".trim()||"http://localhost:8000").replace(/\/api\/v1\/?$/,"");let qe="http:",Pe="8000";try{const t=new URL(be);qe=t.protocol||"http:",Pe=t.port||(t.protocol==="https:"?"443":"80"),!t.port&&(t.hostname==="localhost"||t.hostname==="127.0.0.1")&&(Pe="8000")}catch{}const Sa=()=>{var C,P;const{t}=ae();d.useEffect(()=>{console.log("[ServerControl] API_BASE_URL:",be),console.log("[ServerControl] Environment:",{VITE_API_URL:"http://localhost:8000/api/v1",location:window.location.href})},[]);const[s,n]=d.useState({backend:"checking",frontend:"checking",lastCheck:new Date}),[r,a]=d.useState(0),[l,o]=d.useState(!1),[i,c]=d.useState(!1),[h,u]=d.useState(!1),[N,_]=d.useState(!1),[m,p]=d.useState(null),[b,j]=d.useState(!1),[D,L]=d.useState(5e3),[M,q]=d.useState(null);d.useEffect(()=>{K();const E=setInterval(K,3e4);return()=>clearInterval(E)},[]),d.useEffect(()=>{console.log("[ServerControl] Uptime sync effect triggered:",{backend:s.backend,uptime:s.uptime,currentUptime:r}),s.backend==="online"&&s.uptime!==void 0?(r===0||Math.abs(r-s.uptime)>5)&&(console.log("[ServerControl] Updating currentUptime to:",s.uptime),a(s.uptime)):s.backend==="offline"&&(console.log("[ServerControl] Backend offline, resetting uptime to 0"),a(0))},[s.backend,s.uptime]),d.useEffect(()=>{if(s.backend==="online"){console.log("[ServerControl] Starting uptime counter, initial value:",r);const E=setInterval(()=>{a(w=>{const z=w+1;return z%10===0&&console.log("[ServerControl] Uptime:",z),z})},1e3);return()=>{console.log("[ServerControl] Stopping uptime counter"),clearInterval(E)}}},[s.backend]);const K=async()=>{try{console.log("[ServerControl] Checking health at:",`${be}/health`);const E=new AbortController,w=setTimeout(()=>E.abort(),1e4),z=await fetch(`${be}/health`,{method:"GET",signal:E.signal});clearTimeout(w);let $="offline",A=0,g="",O=null;if(z.ok){const U=await z.json();console.log("[ServerControl] Health data received:",U),$="online",A=U.uptime||0,O=U}else g=`Backend error: ${z.status}`,console.error("[ServerControl] Backend error:",g);const J="online";console.log("[ServerControl] Setting status:",{backendStatus:$,uptime:A,health:O}),n({backend:$,frontend:J,uptime:A,lastCheck:new Date,error:g||void 0}),p(O),q(new Date().toLocaleTimeString())}catch(E){console.error("[ServerControl] Connection error:",E),n(w=>({...w,backend:"offline",frontend:"online",lastCheck:new Date,error:`Connection error: ${E instanceof Error?E.message:"Unknown error"}`})),p(null),q(new Date().toLocaleTimeString())}};d.useEffect(()=>{if(!b||!N)return;const E=setInterval(()=>{K()},Math.max(2e3,D));return()=>clearInterval(E)},[b,D,N]);const S=async()=>{if(!l){o(!0);return}c(!0);try{[`${be}/api/v1/admin/shutdown`,`${be}/control/api/stop-backend`,`${be}/control/api/stop-all`].forEach(w=>{fetch(w,{method:"POST",signal:AbortSignal.timeout(1e3)}).catch(()=>{})}),setTimeout(()=>{document.body.innerHTML=`
          <div style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
          ">
            <div style="text-align: center; padding: 40px;">
              <div style="font-size: 64px; margin-bottom: 20px;">✓</div>
              <h1 style="font-size: 32px; margin-bottom: 10px;">${t("serverStopped")}</h1>
              <p style="font-size: 18px; opacity: 0.9;">${t("canCloseWindow")}</p>
              <p style="font-size: 14px; opacity: 0.7; margin-top: 20px;">
                ${t("systemTitle")}
              </p>
            </div>
          </div>
        `,setTimeout(()=>{window.close()},1500)},500)}catch(E){c(!1),o(!1),console.error("Exit error:",E)}},y=async()=>{u(!0);try{(await fetch(`${be}/control/api/start`,{method:"POST",signal:AbortSignal.timeout(5e3)})).ok?setTimeout(()=>{window.location.reload()},2e3):window.location.reload()}catch(E){console.warn("Restart API failed, using page reload:",E),window.location.reload()}},R=E=>{switch(s[E]){case"online":return"text-green-500";case"offline":return"text-red-500";case"checking":return"text-yellow-500";default:return"text-gray-500"}},k=E=>{switch(s[E]){case"online":return e.jsx(Ne,{size:14});case"offline":return e.jsx(je,{size:14});case"checking":return e.jsx(is,{size:14,className:"animate-pulse"});default:return e.jsx(is,{size:14})}},H=()=>s.backend==="online"&&s.frontend==="online"?"online":s.backend==="offline"||s.frontend==="offline"?"offline":"checking";return i?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-yellow-100 border border-yellow-300 rounded-lg",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(vt,{size:16})}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:t("exiting")})]}):h?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 border border-blue-300 rounded-lg",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(vt,{size:16})}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Restarting..."})]}):l?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-red-50 border border-red-300 rounded-lg",children:[e.jsx(je,{size:16,className:"text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:t("confirmExit")}),e.jsx("button",{onClick:S,className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:t("yesExit")}),e.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1 bg-gray-200 text-gray-800 text-xs rounded hover:bg-gray-300 transition-colors",children:t("cancel")})]}):e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:y,disabled:h,className:"flex items-center space-x-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",title:t("restart"),children:[e.jsx(vt,{size:16,className:h?"animate-spin":""}),e.jsx("span",{children:t("restart")})]}),e.jsxs("button",{onClick:S,disabled:i,className:"flex items-center space-x-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",title:t("exit"),children:[e.jsx(Yn,{size:16}),e.jsx("span",{children:t("exit")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 px-4 py-2 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{_(E=>!E),m||K()},title:"Click to toggle details and refresh",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qn,{size:14,className:"text-gray-500"}),e.jsx("div",{className:R("backend"),children:k("backend")}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Backend"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kn,{size:14,className:"text-gray-500"}),e.jsx("div",{className:R("frontend"),children:k("frontend")}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:(s.frontend==="online"||s.frontend==="offline","Frontend")})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:H()==="online"?"System Online":H()==="offline"?"System Offline":"Checking..."}),s.backend==="online"&&r>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[t("uptime"),": ",Math.floor(r/3600),"h ",Math.floor(r%3600/60),"m ",r%60,"s"]}),s.error&&e.jsxs("span",{className:"text-xs text-red-500 truncate max-w-32",title:s.error,children:["Error: ",s.error.substring(0,20),"..."]})]})]}),N&&e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 text-white bg-slate-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold",children:"System Health"}),e.jsxs("div",{className:"text-xs opacity-90 space-x-2",children:[m!=null&&m.version?e.jsxs("span",{children:["v",m.version]}):null,m!=null&&m.timestamp?e.jsx("span",{children:new Date(m.timestamp).toLocaleString()}):null,M?e.jsxs("span",{children:["(checked ",M,")"]}):null]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-emerald-300 shadow-[0_0_6px_rgba(16,185,129,0.9)]"}),e.jsx("span",{className:"text-white/90 text-xs",children:"Frontend"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full "+((m==null?void 0:m.status)==="healthy"?"bg-emerald-300 shadow-[0_0_6px_rgba(16,185,129,0.9)]":s.backend==="checking"?"bg-amber-300 shadow-[0_0_6px_rgba(245,158,11,0.9)]":"bg-rose-300 shadow-[0_0_6px_rgba(244,63,94,0.9)]")}),e.jsx("span",{className:"text-white/90 text-xs",children:"Backend"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-white/90",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:E=>j(E.target.checked),"aria-label":"Toggle auto refresh"}),"Auto-refresh"]}),e.jsxs("select",{value:String(D),onChange:E=>L(parseInt(E.target.value,10)),className:"bg-white/20 text-white rounded px-2 py-1 text-xs","aria-label":"Auto refresh interval",disabled:!b,children:[e.jsx("option",{className:"text-black",value:"3000",children:"3s"}),e.jsx("option",{className:"text-black",value:"5000",children:"5s"}),e.jsx("option",{className:"text-black",value:"10000",children:"10s"}),e.jsx("option",{className:"text-black",value:"30000",children:"30s"})]})]})]})]})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-4 bg-white",children:[s.backend==="online"&&r>0&&e.jsx("div",{className:"rounded-xl border-2 border-indigo-200 bg-gradient-to-br from-indigo-50 to-purple-50 p-6 md:col-span-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"System Uptime"}),e.jsxs("div",{className:"text-4xl font-bold text-indigo-600",children:[Math.floor(r/3600),"h ",Math.floor(r%3600/60),"m ",r%60,"s"]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:"⏱️"})]})}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Database"}),e.jsx("div",{className:"text-sm font-semibold",children:(m==null?void 0:m.database)||(m==null?void 0:m.db)||"unknown"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Students"}),e.jsx("div",{className:"text-sm font-semibold",children:((C=m==null?void 0:m.statistics)==null?void 0:C.students)??(m==null?void 0:m.students_count)??"—"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Courses"}),e.jsx("div",{className:"text-sm font-semibold",children:((P=m==null?void 0:m.statistics)==null?void 0:P.courses)??(m==null?void 0:m.courses_count)??"—"})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Frontend"}),e.jsxs("div",{className:"text-sm font-semibold",children:["running on ",window.location.hostname,":",window.location.port||"5173"]})]}),e.jsxs("div",{className:"rounded-lg border p-3 md:col-span-3",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Available Endpoints"}),(()=>{var g;const E=String(window.location.port||"5173"),z=(Array.isArray((g=m==null?void 0:m.network)==null?void 0:g.ips)?m.network.ips:[]).filter(O=>!O||typeof O!="string"?!1:O==="localhost"||O==="127.0.0.1"||O===window.location.hostname?!0:!O.startsWith("169.254.")),$=new Set(z);window.location.hostname&&!$.has(window.location.hostname)&&$.add(window.location.hostname);const A=Array.from($);return A.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.map(O=>{const J=O.includes(":")&&!O.startsWith("[")?`[${O}]`:O;return e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-mono text-gray-700 mb-1",children:O}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{className:"text-indigo-600 hover:underline",href:`${qe}//${J}:${Pe}/`,target:"_blank",rel:"noopener noreferrer",children:"Backend"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`${qe}//${J}:${Pe}/docs`,target:"_blank",rel:"noopener noreferrer",children:"Docs"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`${qe}//${J}:${Pe}/redoc`,target:"_blank",rel:"noopener noreferrer",children:"ReDoc"}),e.jsx("a",{className:"text-indigo-600 hover:underline",href:`${qe}//${J}:${Pe}/health`,target:"_blank",rel:"noopener noreferrer",children:"Health"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("a",{className:"text-emerald-700 hover:underline",href:`http://${J}:${E}/`,target:"_blank",rel:"noopener noreferrer",children:"Frontend"})]})]},O)})}):e.jsx("div",{className:"text-xs text-gray-600",children:"No active IPs available."})})()]}),e.jsx("div",{className:"rounded-lg border-2 border-indigo-100 bg-gradient-to-r from-indigo-50 to-purple-50 p-4 md:col-span-3",children:e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("div",{className:"text-sm font-semibold text-indigo-900",children:"Σύστημα Διαχείρισης Σπουδαστών ΜΙΕΕΚ - AUT Μηχανική Αυτοκινήτου"}),e.jsx("div",{className:"text-xs text-indigo-700",children:"Ανάπτυξη Λογισμικού: Βασίλειος Σαμαράς"}),e.jsx("div",{className:"text-xs text-indigo-600",children:"©2025 All rights reserved - MIT license"})]})})]})]})]})},Wa=()=>{const{t}=ae(),[s,n]=d.useState([]),[r,a]=d.useState([]),[l,o]=d.useState(!0),[i,c]=d.useState(null),[h,u]=d.useState(!1),[N,_]=d.useState(!1),[m,p]=d.useState(null),[b,j]=d.useState(null),[D,L]=d.useState(!1),[M,q]=d.useState(!1),[K,S]=d.useState(null);d.useEffect(()=>{R()},[]);const y=(C,P="info")=>{c({message:C,type:P}),setTimeout(()=>c(null),3e3)},R=async()=>{o(!0);try{const[C,P]=await Promise.all([Ue.getAll(),et.getAll()]);n(Array.isArray(C)?C:[]),a(Array.isArray(P)?P:[]),(!Array.isArray(C)||!Array.isArray(P))&&y("Failed to load some data. Endpoints might be missing.","error")}catch{y("Failed to load data. Server returned an error.","error"),n([]),a([])}finally{o(!1)}},[k,H]=d.useState("dashboard");return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i&&e.jsx(wa,{message:i.message,type:i.type,onClose:()=>c(null)}),e.jsxs("div",{className:"flex items-center justify-between pb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t("systemTitle")}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(va,{})})]}),e.jsx("div",{className:"flex space-x-3",children:[{key:"dashboard",label:t("dashboard")},{key:"attendance",label:t("attendance")},{key:"grading",label:t("grades")},{key:"students",label:t("students")},{key:"courses",label:t("courses")},{key:"calendar",label:t("calendar")},{key:"operations",label:t("utilsTab")},{key:"power",label:t("powerTab")||"Power"}].map(C=>e.jsx("button",{onClick:()=>H(C.key),className:`px-4 py-2 rounded-lg border ${k===C.key?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:C.label},C.key))}),k==="dashboard"&&e.jsx(la,{students:s,courses:r,stats:{totalStudents:s.length,activeStudents:s.filter(C=>C.is_active!==!1).length,totalCourses:r.length}}),k==="students"&&(l?e.jsx(ys,{}):b?e.jsx(fa,{studentId:b,onBack:()=>j(null)}):e.jsx(e.Fragment,{children:e.jsx(On,{students:s,loading:l,setShowAddModal:u,onEdit:C=>{p(C),_(!0)},onDelete:async C=>{try{if(!window.confirm("Are you sure you want to delete this student?"))return;await Ue.delete(C),n(P=>Array.isArray(P)?P.filter(E=>E.id!==C):[]),y("Student deleted successfully!","success")}catch{y("Failed to delete student. Please try again.","error")}},onViewProfile:C=>{j(C)}})})),k==="students"&&h&&e.jsx(ya,{onClose:()=>u(!1),onAdd:async C=>{try{const P=await Ue.create(C);n(E=>Array.isArray(E)?[P,...E]:[P]),y("Student added successfully!","success")}catch{y("Failed to add student. Please check the form and try again.","error")}finally{u(!1)}}}),k==="students"&&N&&m&&e.jsx(ba,{student:m,onClose:()=>_(!1),onUpdate:async C=>{try{const P=await Ue.update(C.id,C);n(E=>Array.isArray(E)?E.map(w=>w.id===P.id?P:w):[P]),y("Student updated successfully!","success")}catch{y("Failed to update student. Please try again.","error")}finally{_(!1)}}}),k==="courses"&&D&&e.jsx(ja,{onClose:()=>L(!1),onAdd:async C=>{try{const P=await et.create(C);a(E=>Array.isArray(E)?[...E,P]:[P]),y("Course added successfully!","success")}catch{y("Failed to add course. Please try again.","error")}finally{L(!1)}}}),k==="courses"&&M&&K&&e.jsx(Na,{course:K,onClose:()=>q(!1),onUpdate:async C=>{try{const P=await et.update(C.id,C);a(E=>Array.isArray(E)?E.map(w=>w.id===P.id?P:w):[P]),y("Course updated successfully!","success")}catch{y("Failed to update course. Please try again.","error")}finally{q(!1)}}}),k==="courses"&&e.jsx(aa,{courses:r,loading:l,onAddCourse:()=>L(!0),onEdit:C=>{S(C),q(!0)},onDelete:async C=>{try{if(!window.confirm("Are you sure you want to delete this course?"))return;await et.delete(C),a(P=>Array.isArray(P)?P.filter(E=>E.id!==C):[]),y("Course deleted successfully!","success")}catch{y("Failed to delete course. Please try again.","error")}}}),k==="attendance"&&e.jsx(ca,{courses:r,students:s}),k==="grading"&&e.jsx(da,{students:s,courses:r}),k==="calendar"&&e.jsx(ia,{courses:r}),k==="operations"&&e.jsx(ma,{students:s}),k==="power"&&e.jsxs("div",{className:"bg-white border rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:t("power")||"Power & Server Control"}),e.jsx(Sa,{})]})]})};export{Wa as default};
