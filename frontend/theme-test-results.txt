
> student-management-frontend@1.6.3 test
> vitest src/ThemeContext.test.tsx


[1m[44m DEV [49m[22m [34mv4.0.8 [39m[90mD:/SMS/student-management-system/frontend[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2minitializes with light theme as default
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mrestores theme from localStorage on mount
[22m[39m[ThemeProvider] Initializing with theme: dark from localStorage: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mrestores theme from localStorage on mount
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mrestores theme from localStorage on mount
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mvalidates theme from localStorage
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: invalid-theme
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mhandles corrupted localStorage data
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: {"invalid": json}
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mapplies initial theme classes to DOM
[22m[39m[ThemeProvider] Initializing with theme: dark from localStorage: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mapplies initial theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mapplies initial theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2minitialization[2m > [22m[2mapplies initial theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to dark
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to dark
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to dark
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to relaxing
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to fancy
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: fancy
[ThemeProvider] Applying theme: fancy | Resolved to: fancy

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mchanges theme to system
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mpersists theme to localStorage
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mapplies theme classes to DOM
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mremoves previous theme classes when switching
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mremoves previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mremoves previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mremoves previous theme classes when switching
[22m[39m[ThemeProvider] Theme set to: light
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mremoves previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes:  | body classes:  | has dark: [33mfalse[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msetTheme[2m > [22m[2mupdates state even if localStorage fails
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Applying theme: dark | Resolved to: dark

stderr | src/ThemeContext.test.tsx > ThemeContext > setTheme > updates state even if localStorage fails
[ThemeProvider] Failed to save theme: Error: QuotaExceededError
    at Proxy.<anonymous> (D:/SMS/student-management-system/frontend/src/ThemeContext.test.tsx:175:15)
    at Proxy.setItem (file:///D:/SMS/student-management-system/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at Object.setTheme (D:/SMS/student-management-system/frontend/src/ThemeContext.tsx:133:20)
    at D:/SMS/student-management-system/frontend/src/ThemeContext.test.tsx:181:24
    at D:\SMS\student-management-system\frontend\node_modules\@testing-library\react\dist\act-compat.js:48:24
    at process.env.NODE_ENV.exports.act (D:\SMS\student-management-system\frontend\node_modules\react\cjs\react.development.js:814:22)
    at D:\SMS\student-management-system\frontend\node_modules\@testing-library\react\dist\act-compat.js:47:25
    at D:/SMS/student-management-system/frontend/src/ThemeContext.test.tsx:180:7
    at file:///D:/SMS/student-management-system/frontend/node_modules/@vitest/runner/dist/index.js:157:11
    at file:///D:/SMS/student-management-system/frontend/node_modules/@vitest/runner/dist/index.js:753:26

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2meffectiveTheme resolution[2m > [22m[2mresolves system theme to light when system prefers light
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2meffectiveTheme resolution[2m > [22m[2mresolves system theme to dark when system prefers dark
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2meffectiveTheme resolution[2m > [22m[2meffectiveTheme equals theme for non-system themes
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark
[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing
[ThemeProvider] Theme set to: fancy
[ThemeProvider] Applying theme: fancy | Resolved to: fancy

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mregisters mediaQuery listener when theme is system
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: light
[ThemeProvider] System theme changed to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mupdates effectiveTheme when system preference changes
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mremoves listener when theme changes from system
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: light
[ThemeProvider] Theme set to: light
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2msystem theme listener[2m > [22m[2mremoves listener on unmount
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: system
[ThemeProvider] Applying theme: system | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mmaintains theme across multiple switches
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark
[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing
[ThemeProvider] Theme set to: light
[ThemeProvider] Applying theme: light | Resolved to: light

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mpersists latest theme to localStorage across switches
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark
[ThemeProvider] Theme set to: fancy
[ThemeProvider] Applying theme: fancy | Resolved to: fancy

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mtheme switching flow[2m > [22m[2mupdates DOM classes across theme switches
[22m[39m[ThemeProvider] After apply - html classes: relaxing | body classes: relaxing | has dark: [33mfalse[39m | has relaxing: [33mtrue[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to documentElement
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to documentElement
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to documentElement
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to body
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to body
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies theme to body
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] After apply - html classes: relaxing | body classes: relaxing | has dark: [33mfalse[39m | has relaxing: [33mtrue[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] Theme set to: fancy
[ThemeProvider] Applying theme: fancy | Resolved to: fancy

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mapplies all supported theme classes correctly
[22m[39m[ThemeProvider] After apply - html classes: fancy | body classes: fancy | has dark: [33mfalse[39m | has relaxing: [33mfalse[39m | has fancy: [33mtrue[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mcleans up previous theme classes when switching
[22m[39m[ThemeProvider] Initializing with theme: light from localStorage: [1mnull[22m
[ThemeProvider] Applying theme: light | Resolved to: light
[ThemeProvider] Theme set to: dark
[ThemeProvider] Applying theme: dark | Resolved to: dark

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mcleans up previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mcleans up previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes: dark | body classes: dark | has dark: [33mtrue[39m | has relaxing: [33mfalse[39m | has fancy: [33mfalse[39m

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mcleans up previous theme classes when switching
[22m[39m[ThemeProvider] Theme set to: relaxing
[ThemeProvider] Applying theme: relaxing | Resolved to: relaxing

[90mstdout[2m | src/ThemeContext.test.tsx[2m > [22m[2mThemeContext[2m > [22m[2mDOM manipulation[2m > [22m[2mcleans up previous theme classes when switching
[22m[39m[ThemeProvider] After apply - html classes: relaxing | body classes: relaxing | has dark: [33mfalse[39m | has relaxing: [33mtrue[39m | has fancy: [33mfalse[39m

 [31mÎ­Î¶Ïˆ[39m src/ThemeContext.test.tsx [2m([22m[2m37 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 248[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m initializes with light theme as default[32m 14[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m restores theme from localStorage on mount[32m 3[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m validates theme from localStorage[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m handles corrupted localStorage data[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m applies initial theme classes to DOM[32m 14[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m changes theme to dark[32m 3[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m changes theme to relaxing[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m changes theme to fancy[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m changes theme to system[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m persists theme to localStorage[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m applies theme classes to DOM[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m removes previous theme classes when switching[32m 33[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m updates state even if localStorage fails[32m 5[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m resolves system theme to light when system prefers light[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m resolves system theme to dark when system prefers dark[32m 1[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m effectiveTheme equals theme for non-system themes[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m registers mediaQuery listener when theme is system[32m 1[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m updates effectiveTheme when system preference changes[32m 2[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m removes listener when theme changes from system[32m 3[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m removes listener on unmount[32m 1[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m throws error when used outside ThemeProvider[32m 3[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m maintains theme across multiple switches[32m 1[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m persists latest theme to localStorage across switches[32m 1[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m updates DOM classes across theme switches[32m 24[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m applies theme to documentElement[32m 16[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m applies theme to body[32m 16[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m applies all supported theme classes correctly[32m 48[2mms[22m[39m
       [32mÎ­ÎµÎ¥[39m cleans up previous theme classes when switching[32m 31[2mms[22m[39m
[31m       [31mâ”œÎ©[31m handles localStorage.getItem failure during initialization[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÎ©[31m handles empty string in localStorage[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m handles whitespace-only string in localStorage[39m[32m 2[2mms[22m[39m
[31m       [31mâ”œÎ©[31m handles null in localStorage[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m context state matches localStorage after update[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m effectiveTheme reflects current theme setting[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m new hook instances reflect updated theme[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m handles missing matchMedia support[39m[32m 1[2mms[22m[39m
[31m       [31mâ”œÎ©[31m applies correct theme when system preference is set initially[39m[32m 1[2mms[22m[39m

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ Failed Tests 9 Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ

 FAIL  src/ThemeContext.test.tsx > ThemeContext > localStorage edge cases > handles localStorage.getItem failure during initialization
 FAIL  src/ThemeContext.test.tsx > ThemeContext > localStorage edge cases > handles empty string in localStorage
 FAIL  src/ThemeContext.test.tsx > ThemeContext > localStorage edge cases > handles whitespace-only string in localStorage
 FAIL  src/ThemeContext.test.tsx > ThemeContext > localStorage edge cases > handles null in localStorage
 FAIL  src/ThemeContext.test.tsx > ThemeContext > state consistency > context state matches localStorage after update
 FAIL  src/ThemeContext.test.tsx > ThemeContext > state consistency > effectiveTheme reflects current theme setting
 FAIL  src/ThemeContext.test.tsx > ThemeContext > state consistency > new hook instances reflect updated theme
 FAIL  src/ThemeContext.test.tsx > ThemeContext > system theme edge cases > handles missing matchMedia support
 FAIL  src/ThemeContext.test.tsx > ThemeContext > system theme edge cases > applies correct theme when system preference is set initially
Error: Storage access denied
 Î­Î¶Ïˆ Proxy.<anonymous> src/ThemeContext.test.tsx:425:15
    423|     it('handles localStorage.getItem failure during initialization', (Î­Î‘Î¿
    424|       const getItemSpy = vi.spyOn(Storage.prototype, 'getItem').mockImÎ­Î‘Î¿
    425|         throw new Error('Storage access denied');
       |               ^
    426|       });
    427| 
 Î­Î¶Ïˆ src/ThemeContext.tsx:15:33
 Î­Î¶Ïˆ mountStateImpl node_modules/react-dom/cjs/react-dom-client.development.js:8268:24
 Î­Î¶Ïˆ mountState node_modules/react-dom/cjs/react-dom-client.development.js:8289:22
 Î­Î¶Ïˆ Object.useState node_modules/react-dom/cjs/react-dom-client.development.js:26243:18
 Î­Î¶Ïˆ process.env.NODE_ENV.exports.useState node_modules/react/cjs/react.development.js:1263:34
 Î­Î¶Ïˆ ThemeProvider src/ThemeContext.tsx:14:34
 Î­Î¶Ïˆ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Î­Î¶Ïˆ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ[1/9]Î­ÎŸÏˆ


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m9 failed[39m[22m[2m | [22m[1m[32m28 passed[39m[22m[90m (37)[39m
[2m   Start at [22m 11:10:47
[2m   Duration [22m 12.25s[2m (transform 3.04s, setup 10.08s, collect 118ms, tests 248ms, environment 608ms, prepare 45ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[31mCancelling test run. Press CTRL+c again to exit forcefully.
[39m
