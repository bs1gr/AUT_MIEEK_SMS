
> student-management-frontend@1.17.7 pretest
> node ../tools/enforce-vitest-policy.cjs


> student-management-frontend@1.17.7 test
> vitest SupportingComponents.test.tsx


[1m[44m DEV [49m[22m [34mv4.0.16 [39m[90mD:/SMS/student-management-system/frontend[39m

stderr | src/features/export-admin/__tests__/SupportingComponents.test.tsx
[i18n] Search translation keys loaded: 6 keys

 [31mÎ­Î¶Ïˆ[39m src/features/export-admin/__tests__/SupportingComponents.test.tsx [2m([22m[2m19 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 254[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders email configuration title[39m[32m 19[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders all SMTP form fields[39m[32m 3[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders save and test buttons[39m[32m 2[2mms[22m[39m
[31m     [31mâ”œÎ©[31m allows input in form fields[39m[32m 3[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders settings title[39m[32m 3[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders all settings fields with hints[39m[32m 2[2mms[22m[39m
[31m     [31mâ”œÎ©[31m renders save settings button[39m[32m 2[2mms[22m[39m
[31m     [31mâ”œÎ©[31m accepts numeric input in settings fields[39m[32m 2[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m renders modal when open with job data[32m 39[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m displays job details correctly[32m 11[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m displays progress bar with correct percentage[32m 4[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m calls onClose when close button clicked[32m 127[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m displays error section when job has error[32m 5[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m does not render when isOpen is false[32m 1[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m renders all metric cards[32m 6[2mms[22m[39m
[31m     [31mâ”œÎ©[31m displays metric values correctly[39m[32m 7[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m renders format breakdown section[32m 6[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m renders chart container[32m 6[2mms[22m[39m
     [32mÎ­ÎµÎ¥[39m displays duration trend chart[32m 4[2mms[22m[39m

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ Failed Tests 9 Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ

 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > EmailConfigPanel > renders email configuration title
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > EmailConfigPanel > renders all SMTP form fields
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > EmailConfigPanel > renders save and test buttons
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > EmailConfigPanel > allows input in form fields
TypeError: Cannot read properties of undefined (reading 'smtp_host')
 Î­Î¶Ïˆ EmailConfigPanel src/features/export-admin/components/index.tsx:147:31

 Î­Î¶Ïˆ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Î­Î¶Ïˆ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Î­Î¶Ïˆ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Î­Î¶Ïˆ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Î­Î¶Ïˆ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Î­Î¶Ïˆ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Î­Î¶Ïˆ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Î­Î¶Ïˆ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 Î­Î¶Ïˆ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ[1/9]Î­ÎŸÏˆ

 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > ExportSettingsPanel > renders settings title
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > ExportSettingsPanel > renders all settings fields with hints
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > ExportSettingsPanel > renders save settings button
 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > ExportSettingsPanel > accepts numeric input in settings fields
TypeError: Cannot read properties of undefined (reading 'retention_days')
 Î­Î¶Ïˆ ExportSettingsPanel src/features/export-admin/components/index.tsx:284:31
    282|             <Input
    283|               type="number"
    284|               value={formData.retention_days || 30}
       |                               ^
    285|               onChange={(e) =>
    286|                 setFormData({ ...formData, retention_days: parseInt(e.Î­Î‘Î¿
 Î­Î¶Ïˆ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Î­Î¶Ïˆ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Î­Î¶Ïˆ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Î­Î¶Ïˆ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Î­Î¶Ïˆ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Î­Î¶Ïˆ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Î­Î¶Ïˆ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Î­Î¶Ïˆ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 Î­Î¶Ïˆ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ[2/9]Î­ÎŸÏˆ

 FAIL  src/features/export-admin/__tests__/SupportingComponents.test.tsx > PerformanceAnalytics > displays metric values correctly
TestingLibraryElementError: Unable to find an element with the text: 120.50s. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="space-y-4"
    >
      <div
        class="grid gap-4 md:grid-cols-3"
      >
        <div
          class="rounded-xl border bg-card text-card-foreground shadow"
        >
          <div
            class="flex flex-col space-y-1.5 p-6 pb-2"
          >
            <div
              class="font-semibold tracking-tight text-sm"
            >
              Avg Duration
            </div>
          </div>
          <div
            class="p-6 pt-0"
          >
            <div
              class="text-2xl font-bold"
            >
              120.50
              detail.seconds
            </div>
          </div>
        </div>
        <div
          class="rounded-xl border bg-card text-card-foreground shadow"
        >
          <div
            class="flex flex-col space-y-1.5 p-6 pb-2"
          >
            <div
              class="font-semibold tracking-tight text-sm"
            >
              Success Rate
            </div>
          </div>
          <div
            class="p-6 pt-0"
          >
            <div
              class="text-2xl font-bold"
            >
              95.7
              %
            </div>
          </div>
        </div>
        <div
          class="rounded-xl border bg-card text-card-foreground shadow"
        >
          <div
            class="flex flex-col space-y-1.5 p-6 pb-2"
          >
            <div
              class="font-semibold tracking-tight text-sm"
            >
              Total Exports
            </div>
          </div>
          <div
            class="p-6 pt-0"
          >
            <div
              class="text-2xl font-bold"
            >
              342
            </div>
          </div>
        </div>
      </div>
      <div
        class="rounded-xl border bg-card text-card-foreground shadow"
      >
        <div
          class="flex flex-col space-y-1.5 p-6"
        >
          <div
            class="font-semibold leading-none tracking-tight"
          >
            Export Format Breakdown
          </div>
        </div>
        <div
          class="p-6 pt-0"
        >
          <div
            class="grid gap-4 md:grid-cols-3"
          >
            <div
              class="rounded-lg border p-4"
            >
              <p
                class="text-sm font-medium capitalize"
              >
                excel
              </p>
              <p
                class="text-2xl font-bold"
              >
                180
              </p>
              <p
                class="text-xs text-muted-foreground"
              >
                96.2
                %
                success
              </p>
            </div>
            <div
              class="rounded-lg border p-4"
            >
              <p
                class="text-sm font-medium capitalize"
              >
                csv
              </p>
              <p
                class="text-2xl font-bold"
              >
                120
              </p>
              <p
                class="text-xs text-muted-foreground"
              >
                94.1
                %
                success
              </p>
            </div>
            <div
              class="rounded-lg border p-4"
            >
              <p
                class="text-sm font-medium capitalize"
              >
                pdf
              </p>
              <p
                class="text-2xl font-bold"
              >
                42
              </p>
              <p
                class="text-xs text-muted-foreground"
              >
                92.4
                %
                success
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
 Î­Î¶Ïˆ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 Î­Î¶Ïˆ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 Î­Î¶Ïˆ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 Î­Î¶Ïˆ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 Î­Î¶Ïˆ src/features/export-admin/__tests__/SupportingComponents.test.tsx:312:19
    310|     renderWithProviders(<PerformanceAnalytics metrics={mockMetrics} />Î­Î‘Î¿
    311|
    312|     expect(screen.getByText('120.50s')).toBeInTheDocument();
       |                   ^
    313|     expect(screen.getByText('95.7%')).toBeInTheDocument();
    314|     expect(screen.getByText('342')).toBeInTheDocument();

Î­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆÎ­ÎŸÏˆ[3/9]Î­ÎŸÏˆ


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m9 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (19)[39m
[2m   Start at [22m 10:19:26
[2m   Duration [22m 1.98s[2m (transform 174ms, setup 313ms, import 534ms, tests 254ms, environment 661ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
