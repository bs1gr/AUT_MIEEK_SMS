--------------------------------------------------------------
 COMMIT READY - Pre-Commit Verification
 Student Management System v1.17.6
--------------------------------------------------------------

Mode: quick
Started: 2026-02-01 02:28:21
Log file: D:\SMS\student-management-system\commit_ready_20260201-022821.log


╔══════════════════════════════════════════════════════════════╗
║  Phase A: Version Propagation & Docs Update                   ║
╚══════════════════════════════════════════════════════════════╝

??  Version sync to package.json skipped (use -SyncVersion or -AutoFix to enable)
??  Docs update skipped (use -UpdateDocs or -AutoFix to enable)

╔══════════════════════════════════════════════════════════════╗
║  Phase 0: Version Consistency                                 ║
╚══════════════════════════════════════════════════════════════╝

??  Running comprehensive version verification...

 + ======================================================================
SMS Version Verification Tool
======================================================================
??  Using version from VERSION file: 1.17.6
??  Target version: 1.17.6
??  Mode: CHECK ONLY

 + ======================================================================
Checking Version References
======================================================================
? VERSION file: 1.17.6 (correct)
? Backend main.py docstring: 1.17.6 (correct)
? Frontend package.json: 1.17.6 (correct)
? User guide version: 1.17.6 (correct)
? Developer guide version: 1.17.6 (correct)
? Documentation index version: 1.17.6 (correct)
? COMMIT_READY.ps1 version: 1.17.6 (correct)
? INSTALLER_BUILDER.ps1 version: 1.17.6 (correct)

 + ======================================================================
Verification Summary
======================================================================
Total checks:       8
Consistent:         8
Inconsistent:       0
Updated:            0
Failed:             0

? Version verification completed successfully!
? All version references consistent across codebase

╔══════════════════════════════════════════════════════════════╗
║  Phase 0.5: Version Format Enforcement                        ║
╚══════════════════════════════════════════════════════════════╝

? Version format valid: 1.17.6

─────────────────────────────────────────────────
 Backend: Ensure Python Dependencies
─────────────────────────────────────────────────
??  Installing runtime requirements (pip) from requirements.txt
??  Installing dev requirements (pip)
? Backend dependencies ensured

╔══════════════════════════════════════════════════════════════╗
║  Phase 1: Smoke Test - Conftest Config                        ║
╚══════════════════════════════════════════════════════════════╝

??  Checking D:\SMS\student-management-system\backend\tests\conftest.py for secure test settings...
? conftest.py: AUTH_ENABLED=False verified

╔══════════════════════════════════════════════════════════════╗
║  Phase 0: Pre-commit Hook Validation                          ║
╚══════════════════════════════════════════════════════════════╝

??  Running pre-commit hooks on staged files...
? Pre-commit hooks passed (files auto-fixed).
??  Some files were auto-formatted. Review changes with: git diff

╔══════════════════════════════════════════════════════════════╗
║  Phase 1: Code Quality & Linting                              ║
╚══════════════════════════════════════════════════════════════╝


─────────────────────────────────────────────────
 Backend: Ruff Linting
─────────────────────────────────────────────────
??  Running ruff check...
? Backend linting passed

─────────────────────────────────────────────────
 Backend: MyPy Type Checking
─────────────────────────────────────────────────
??  Running mypy...
? Backend type checking failed
backend\services\export_performance_monitor.py:153: error: Need type annotation for "stats"  [var-annotated] backend\services\async_export_service.py:494: error: Argument 1 to "append" of "list" has incompatible type "Spacer"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:521: error: Argument 1 to "append" of "list" has incompatible type "Table"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:524: error: Argument 1 to "build" of "SimpleDocTemplate" has incompatible type "list[Paragraph]"; expected "list[Flowable]"  [arg-type] backend\services\async_export_service.py:524: note: "list" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance backend\services\async_export_service.py:524: note: Consider using "Sequence" instead, which is covariant backend\services\async_export_service.py:581: error: Argument 1 to "append" of "list" has incompatible type "Spacer"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:613: error: Argument 1 to "append" of "list" has incompatible type "Table"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:616: error: Argument 1 to "build" of "SimpleDocTemplate" has incompatible type "list[Paragraph]"; expected "list[Flowable]"  [arg-type] backend\services\async_export_service.py:616: note: "list" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance backend\services\async_export_service.py:616: note: Consider using "Sequence" instead, which is covariant backend\services\async_export_service.py:670: error: Argument 1 to "append" of "list" has incompatible type "Spacer"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:699: error: Argument 1 to "append" of "list" has incompatible type "Table"; expected "Paragraph"  [arg-type] backend\services\async_export_service.py:702: error: Argument 1 to "build" of "SimpleDocTemplate" has incompatible type "list[Paragraph]"; expected "list[Flowable]"  [arg-type] backend\services\async_export_service.py:702: note: "list" is invariant -- see https://mypy.readthedocs.io/en/stable/common_issues.html#variance backend\services\async_export_service.py:702: note: Consider using "Sequence" instead, which is covariant Found 10 errors in 2 files (checked 173 source files)

─────────────────────────────────────────────────
 Frontend: ESLint
─────────────────────────────────────────────────
??  Running ESLint...
? Frontend linting passed

─────────────────────────────────────────────────
 Repository: Markdown Lint
─────────────────────────────────────────────────
??  Running markdownlint with auto-fix...
? Markdown linting passed

─────────────────────────────────────────────────
 Frontend: TypeScript Type Checking
─────────────────────────────────────────────────
??  Skipping TypeScript type checking in quick mode (temporary)
? TypeScript type checking passed

─────────────────────────────────────────────────
 Translation Integrity Check
─────────────────────────────────────────────────
??  Checking translation key parity...
? Translation integrity verified

╔══════════════════════════════════════════════════════════════╗
║  Phase 2: Test Suite Execution                                ║
╚══════════════════════════════════════════════════════════════╝


─────────────────────────────────────────────────
 Backend: pytest
─────────────────────────────────────────────────
??  Using in-memory SQLite for local tests (DATABASE_URL not set)
??  Using strict auth mode for local tests (AUTH_MODE not set)
??  Using batch test runner (prevents system freeze)...

╔════════════════════════════════════════╗
║   Batch Test Runner (SMS v1.17.2)     ║
╚════════════════════════════════════════╝

? Scanning for test files...
? Found 89 test files
? Split into 18 batches (5 files per batch)


┌─────────────────────────────────────────┐
│ Batch 1 of 18 (Files: 5)
└─────────────────────────────────────────┘
   test_admin_backup_encryption.py
   test_admin_bootstrap.py
   test_analytics_router.py
   test_analytics_service.py
   test_attendance_router.py
? Running tests...
ImportError while loading conftest 'D:\SMS\student-management-system\backend\tests\conftest.py'.
tests\conftest.py:57: in <module>
    Base.metadata.create_all(bind=engine)
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\schema.py:5928: in create_all
    bind._run_ddl_visitor(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:3252: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2459: in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\ddl.py:984: in visit_metadata
    self.traverse_single(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\ddl.py:1026: in visit_table
    self.traverse_single(index, create_ok=True)
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\visitors.py:661: in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\ddl.py:1063: in visit_index
    CreateIndex(index)._invoke_with(self.connection)
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\ddl.py:321: in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\ddl.py:187: in _execute_on_connection
    return connection._execute_ddl(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1530: in _execute_ddl
    ret = self._execute_context(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Vasilis\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) index ix_report_templates_category already exists
E   [SQL: CREATE INDEX ix_report_templates_category ON report_templates (category)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)
? Batch 1 failed in 2.2s
? FastFail enabled - stopping execution

╔════════════════════════════════════════╗
║          TEST EXECUTION SUMMARY        ║
╚════════════════════════════════════════╝

Batches:
  Total:   18
?   Completed: 1

Tests:
  Total:   0
?   Failed Batches: 5

Duration: 2.2s

? Some tests failed
?
?? Saving failed test files for re-testing...
?    To retest only failed files, run:
   .\RUN_TESTS_BATCH.ps1 -RetestFailed
? Failed files saved to: .test-failures (5 files)
? Backend tests failed


─────────────────────────────────────────────────
 Frontend: Vitest
─────────────────────────────────────────────────
??  Running fast frontend tests only...
? Frontend tests passed

╔══════════════════════════════════════════════════════════════╗
║  Phase 4: Git Remote Synchronization                          ║
╚══════════════════════════════════════════════════════════════╝

??  Updating remote references...
? Git remote is synchronized (or local is ahead)

╔══════════════════════════════════════════════════════════════╗
║  Phase 4: Automated Cleanup                                   ║
╚══════════════════════════════════════════════════════════════╝


─────────────────────────────────────────────────
 Python Cache Cleanup
─────────────────────────────────────────────────
? Removed 4 Python cache items

─────────────────────────────────────────────────
 Node.js Cache Cleanup
─────────────────────────────────────────────────
??  Node cache already clean

─────────────────────────────────────────────────
 Build Artifacts Cleanup
─────────────────────────────────────────────────

─────────────────────────────────────────────────
 Temporary Files Cleanup
─────────────────────────────────────────────────
? Removed 4 temporary files

─────────────────────────────────────────────────
 Legacy Artifacts Cleanup
─────────────────────────────────────────────────
??  Total space freed: 0.24 MB

╔══════════════════════════════════════════════════════════════╗
║  Phase 5: Documentation and Git Status                        ║
╚══════════════════════════════════════════════════════════════╝


─────────────────────────────────────────────────
 Key Documentation Check
─────────────────────────────────────────────────
? README.md exists
? CHANGELOG.md exists
? docs/DOCUMENTATION_INDEX.md exists
? DOCUMENTATION_INDEX.md found in docs/ (acceptable)

─────────────────────────────────────────────────
 Git Status
─────────────────────────────────────────────────
??  Uncommitted changes detected:
 M backend/data/imports/1_courses.csv  M backend/data/imports/1_grades.csv  M backend/data/imports/1_students.csv  M backend/models.py  M backend/router_registry.py  M backend/schemas/__init__.py  M docs/deployment/PHASE5_BASELINE_METRICS_FEB1_2026.md  M docs/deployment/PHASE5_WEEK1_COMPLETE_FEB1_2026.md  M docs/operations/PRODUCTION_ANALYSIS_OPTIMIZATION_REPORT.md  M docs/operations/PRODUCTION_DATA_MIGRATION_GUIDE.md  M docs/operations/PRODUCTION_OPERATIONS_RUNBOOK.md  M docs/plans/PHASE6_OPTIONS_ANALYSIS.md  M docs/plans/UNIFIED_WORK_PLAN.md  M docs/testing/PRODUCTION_TESTING_COMPREHENSIVE_GUIDE.md  M frontend/src/features/advanced-search/__tests__/AdvancedSearchPage.integration.test.tsx ?? backend/.test-failures ?? backend/migrations/versions/8f9594fc435d_add_report_tables_for_phase_6_reporting_.py ?? backend/routers/routers_custom_reports.py ?? backend/schemas/custom_reports.py ?? backend/services/custom_report_service.py ?? commit_ready_20260201-021048.log ?? commit_ready_20260201-022821.log ?? docs/plans/PHASE6_REPORTING_IMPLEMENTATION_PLAN.md

─────────────────────────────────────────────────
 Root Documentation Whitelist
─────────────────────────────────────────────────
? Found 3 unclassified Markdown file(s) in repo root
    PHASE5_GO_LIVE_COMPLETE_FEB1_2026.md
    PHASE5_PRODUCTION_VALIDATION_FEB1_2026.md
    TRAINING_CREDENTIALS_FEB1_2026.md
??  Run .\\WORKSPACE_CLEANUP.ps1 -Mode standard to auto-organize, or move to docs/ manually

╔══════════════════════════════════════════════════════════════╗
║  Execution Summary                                            ║
╚══════════════════════════════════════════════════════════════╝

Mode: quick
Duration: 83.7s

Code Quality:
  ? Docs & Version Sync
  ? Version Consistency
  ? Version Format
  ? Backend Ruff
  ? Backend MyPy
  ? Frontend ESLint
  ? Markdown Lint
  ? TypeScript
  ? Translation Integrity

Tests:
  ? Backend Dependencies
  ? Conftest Config
  ? Backend pytest
  ? Frontend Vitest

Health Checks:
  ? Git Remote

Cleanup:
  ? Python Cache (4 items)
  ? Node Cache (Already clean)
  ? Build Artifacts
  ? Temp Files (4 files removed)

= * 60
[FAIL] SOME CHECKS FAILED - REVIEW AND FIX
= * 60
