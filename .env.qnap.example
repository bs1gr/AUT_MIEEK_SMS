# QNAP Deployment Configuration
# Student Management System v1.8.0
#
# Instructions:
#   1. Copy this file to .env.qnap
#   2. Update all values marked with <CHANGE_ME>
#   3. Generate secure secrets (see commands below)
#   4. Keep this file secure and never commit it to git
#
# Generate secure secrets:
#   SECRET_KEY: python3 -c "import secrets; print(secrets.token_urlsafe(48))"
#   POSTGRES_PASSWORD: openssl rand -hex 32
#   ADMIN_SHUTDOWN_TOKEN: openssl rand -hex 32

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=sms_user
POSTGRES_PASSWORD=<CHANGE_ME_GENERATE_SECURE_PASSWORD>
POSTGRES_DB=student_management

# ============================================================================
# Application Security
# ============================================================================
# Generate with: python3 -c "import secrets; print(secrets.token_urlsafe(48))"
SECRET_KEY=<CHANGE_ME_GENERATE_SECURE_KEY>
SECRET_KEY_STRICT_ENFORCEMENT=1

# Optional: Token for control API shutdown endpoint
# Generate with: openssl rand -hex 32
ADMIN_SHUTDOWN_TOKEN=

# ============================================================================
# QNAP Network Configuration
# ============================================================================
# Your QNAP NAS IP address (e.g., 192.168.1.100)
QNAP_IP=<CHANGE_ME_YOUR_QNAP_IP>

# Frontend port (default: 8080)
# Change if port 8080 is already in use on your QNAP
SMS_PORT=8080

# ============================================================================
# QNAP Directory Paths
# ============================================================================
# Default paths use /share/Container/sms-* pattern
# Adjust if you want different locations on your QNAP

# PostgreSQL data directory
QNAP_DATA_PATH=/share/Container/sms-postgres

# Application backups directory
QNAP_BACKUP_PATH=/share/Container/sms-backups

# Application logs directory
QNAP_LOG_PATH=/share/Container/sms-logs

# Monitoring data directory (if using monitoring)
QNAP_MONITORING_PATH=/share/Container/sms-monitoring

# ============================================================================
# Application Configuration
# ============================================================================
# Environment: production (required for QNAP)
SMS_ENV=production

# Control API enabled (for management features)
ENABLE_CONTROL_API=1

# ============================================================================
# Performance Tuning
# ============================================================================
# Number of backend workers (2 recommended for NAS)
WORKERS=2

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Academic semester weeks (for date range calculations)
SEMESTER_WEEKS=14

# ============================================================================
# Monitoring Configuration (Optional)
# ============================================================================
# Enable if you want Prometheus/Grafana monitoring
# Start with: docker compose -f docker-compose.qnap.yml --profile monitoring up -d

# Prometheus port (default: 9090)
PROMETHEUS_PORT=9090

# Grafana port (default: 3000)
GRAFANA_PORT=3000

# Grafana admin password
GRAFANA_PASSWORD=<CHANGE_ME_SECURE_PASSWORD>

# Enable application metrics endpoint
ENABLE_METRICS=0

# ============================================================================
# Build Configuration
# ============================================================================
VERSION=1.8.0
BUILD_DATE=2025-11-19

# ============================================================================
# Notes
# ============================================================================
# 1. All ports are configurable to avoid conflicts with QNAP services
# 2. Default QNAP ports to avoid:
#    - 8080: QNAP web interface (configurable in this file)
#    - 443: QNAP HTTPS
#    - 22: SSH
#    - 3306: MySQL (if installed)
#    - 5432: PostgreSQL (if installed)
#    - 9000: Container Station UI
#
# 3. This configuration uses bind mounts for better QNAP integration:
#    - Easy backup via QNAP File Station
#    - Compatible with QNAP snapshot features
#    - Direct access for maintenance
#
# 4. Resource limits are optimized for typical NAS hardware:
#    - Minimum: 4GB RAM, 2 CPU cores
#    - Recommended: 8GB RAM, 4 CPU cores
#
# 5. For security, ensure:
#    - All <CHANGE_ME> values are updated
#    - Strong passwords are used
#    - QNAP firewall is configured
#    - Regular backups are enabled
